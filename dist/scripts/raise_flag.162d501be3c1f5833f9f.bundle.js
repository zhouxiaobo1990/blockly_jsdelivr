(function(e){function t(t){for(var o,n,l=t[0],d=t[1],c=t[2],u=0,p=[];u<l.length;u++)n=l[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);for(i&&i(t);p.length;)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a,o=r[t],l=!0,i=1;i<o.length;i++)a=o[i],0!==s[a]&&(l=!1);l&&(r.splice(t--,1),e=n(n.s=o[0]))}return e}function o(e){return n.p+"scripts/"+{14:"eff1dcb4d49ef2e9fbbb",23:"f106371bc0f8e5a1be6f"}[e]+".bundle.js"}function n(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var l={},s={9:0},r=[];n.e=function(e){var t=[],a=s[e];if(0!==a)if(a)t.push(a[2]);else{var l=new Promise(function(t,o){a=s[e]=[t,o]});t.push(a[2]=l);var i,r=document.createElement("script");r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.src=o(e);var d=new Error;i=function(t){r.onerror=r.onload=null,clearTimeout(c);var a=s[e];if(0!==a){if(a){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",d.name="ChunkLoadError",d.type=o,d.request=n,a[1](d)}s[e]=void 0}};var c=setTimeout(function(){i({type:"timeout",target:r})},12e4);r.onerror=r.onload=i,document.head.appendChild(r)}return Promise.all(t)},n.m=e,n.c=l,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn.jsdelivr.net/gh/zhouxiaobo1990/blockly_jsdelivr/dist/",n.oe=function(e){throw console.error(e),e};var d=window.webpackJsonp=window.webpackJsonp||[],c=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var i=c;return r.push([150,0,1]),a()})({11:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return r});var o=a(20),n=a.n(o),l=a(34),i=a.n(l);const s={ENVIRONMENT:1,CUSTOM:2};class r{constructor(e){this.container_=document.getElementById("blocklyVariableTable"),this.environmentVariables=e,this.environmentVariableValueSpan_=Array(e.length),this.selectedCustomVariableNames_=new Set}logVariable(e,t,a){let o;o=t==s.ENVIRONMENT?this.environmentVariableValueSpan_[e]:this.customVariableValueSpan_[e],o&&("undefined"==typeof a||null===a?o.innerText="<\u672A\u521D\u59CB\u5316>":"object"==typeof a?o.innerText=a:o.innerText=JSON.stringify(a))}selectVariable_(e,t,a){t==s.ENVIRONMENT?this.environmentVariableValueSpan_[e]=a:(this.customVariableValueSpan_[e]=a,this.selectedCustomVariableNames_.add(this.customVariableNames_[e]))}unselectVariable_(e,t){t==s.ENVIRONMENT?this.environmentVariableValueSpan_[e]=null:(this.customVariableValueSpan_[e]=null,this.selectedCustomVariableNames_.delete(this.customVariableNames_[e]))}isVariableSelected_(e,t){return t==s.ENVIRONMENT?null!=this.environmentVariableValueSpan_[e]:null!=this.customVariableValueSpan_[e]}getVariableName_(e,t){return t==s.ENVIRONMENT?"[\u73AF\u5883\u53D8\u91CF]"+this.environmentVariables[e].name:this.customVariableNames_[e]}watchVariable_(e,t){if(!this.isVariableSelected_(e,t)){let a=document.createElement("div");a.classList.add("variableWrapper");let o=document.createElement("span");o.classList.add("unselectVariable"),o.innerHTML="<i class=\"material-icons\">cancel</i>",a.appendChild(o);let n=document.createElement("span");n.classList.add("variableName"),n.innerText=this.getVariableName_(e,t),a.appendChild(n);let l=document.createElement("span");l.classList.add("variableValue"),a.appendChild(l),this.selectVariable_(e,t,l),o.onclick=function(e,t,a){this.unselectVariable_(t,a),this.selectedVariablesDiv_.removeChild(e)}.bind(this,a,e,t),this.selectedVariablesDiv_.appendChild(a)}}init(e){this.customVariableNames_=[];for(let t of e)this.customVariableNames_.push(t.name);this.customVariableValueSpan_=Array(e.length),this.container_.innerHTML=n.a,this.selectedVariablesDiv_=document.getElementById("varialeTableSelectedVariables");let t=document.getElementById("varialeTableSelector");this.environmentVariables.forEach((e,a)=>{this.environmentVariableValueSpan_[a]&&(this.unselectVariable_(a,s.ENVIRONMENT),this.watchVariable_(a,s.ENVIRONMENT));let o=document.createElement("option");o.innerText="[\u73AF\u5883\u53D8\u91CF]"+e.name,t.appendChild(o)}),this.customVariableNames_.forEach((e,a)=>{this.selectedCustomVariableNames_.has(e)&&this.watchVariable_(a,s.CUSTOM);let o=document.createElement("option");o.innerText=e,t.appendChild(o)}),t.addEventListener("change",function(e){let t=e.selectedIndex-1,a=s.ENVIRONMENT;t>=this.environmentVariables.length&&(t-=this.environmentVariables.length,a=s.CUSTOM),this.watchVariable_(t,a),e.selectedIndex=0}.bind(this,t))}}},150:function(e,t,a){"use strict";a.r(t);var o=a(25),n=a(21),l=a(65),i=a.n(l);document.getElementById("helpDialogContents").innerHTML=i.a,o.a({toolbox:n.a,fetchSolution:async function(){return await a.e(23).then(a.t.bind(null,172,3))}})},159:function(e,t,a){"use strict";a.r(t),t["default"]=a.p+"images/file-loader-snapshot1-f4fecc8b3bfb5efa48a22deb9e586ee2.png"},160:function(e,t,a){"use strict";a.r(t),t["default"]=a.p+"images/file-loader-snapshot2-a483a58ab63f403d10a4fa44274cb38e.png"},17:function(e,t,a){"use strict";function o(e){for(let t of C)t.classList.remove("selected");e==A.SLOW?(C[0].classList.add("selected"),w.setRunningOptions({delay:50,costPerRound:1})):e==A.NORMAL?(C[1].classList.add("selected"),w.setRunningOptions({delay:0,costPerRound:30})):e==A.FAST&&(C[2].classList.add("selected"),w.setRunningOptions({delay:0,costPerRound:4e3}))}function n(){let e=new URLSearchParams(window.location.search);return e.has("showSolution")}function l(){let e=new URLSearchParams(window.location.search);return e.has("showDemo")}async function i(e){O=e;let t=n();if(t){document.title+="[\u7B54\u6848]";let e=!1,t=localStorage.getItem("blockly/token");if(t){let o=(await a.e(14).then(a.t.bind(null,184,7))).default;e="8c832db199a866669a86bfd1a3991071e40d5f85"==o(t)}if(!e)return void(window.location.href=f.join(a.p,"pages/authorization.html"))}let i=!t&&l();if(i){document.title+="[\u793A\u4F8B]",document.getElementById("maximizeOutputButton").click(),document.getElementById("blocklyWorkspace").style.visibility="hidden";let e=document.querySelectorAll(".navbar .subnav");for(let t of e)t.classList.contains("unremovable")||t.parentNode.removeChild(t)}let s={blocklyId:"blocklyWorkspace",runningOptions:{delay:0,numRounds:1},toolbox:i?null:e.toolbox,printListener:e.printListener,stateUpdateListener:function(t){t==m.c.RUNNING?(R.onclick=function(){w.pause()},R.innerHTML="\u6682\u505C<i class=\"material-icons\">pause</i>",B.disabled="disabled",M.disabled=""):(R.onclick=function(){w.run()},R.innerHTML="\u8FD0\u884C<i class=\"material-icons\">play_arrow</i>",t==m.c.STOPPED?(R.disabled="disabled",B.disabled="disabled",M.disabled="disabled",setTimeout(function(){R.disabled="",B.disabled=""},1e3)):(B.disabled="",M.disabled="")),e.stateUpdateListener&&e.stateUpdateListener(t)}.bind(this),logArea:document.getElementById("blocklyLogArea"),variableTable:new S.a(e.environmentVariables?e.environmentVariables:[])};w=new m.a(s),e.runningSpeed?o(e.runningSpeed):o(A.NORMAL);let r=document.getElementById("helpDialog"),d=document.getElementById("showHelpDialogButton");if(!t&&!i&&document.getElementById("helpDialogContents").innerHTML){r.style.display="flex";let t=new h.a(r,{setPosition:!1,handle:document.getElementById("helpDialogDragHandle")});if(document.getElementById("helpDialogCloseButton").onclick=function(){r.style.display="none"}.bind(this),d.onclick=function(){r.style.display="flex",t.set(.5*document.body.offsetWidth-200,.5*document.body.offsetHeight-200)}.bind(this),e.fetchSolution){let e=document.getElementById("helpDialogShowDemoButton");e.style.visibility="visible",e.onclick=function(){let e=new URL(window.location);e.searchParams.set("showDemo",1),window.open(e,"_blank")}}}else d.style.display="none";400<r.offsetHeight&&(r.style.height="400px");const c=new k.a({elm:"#blocklyDevloperTools"});c.init();var u;if(window.onresize=function(){clearTimeout(u),u=setTimeout(function(){O.layoutChangeListener&&O.layoutChangeListener(),v.a.svgResize(w.blocklyWorkspace)},500)},!t&&!i){let t=localStorage.getItem("blockly/json/"+N);try{if(t){let e=await E.c(t);v.a.Xml.domToWorkspace(e,w.blocklyWorkspace)}else if(e.fetchInitial){let t=await e.fetchInitial(),a=await E.b(t);v.a.Xml.domToWorkspace(a,w.blocklyWorkspace)}}catch(t){console.log(t)}setInterval(async function(){let e=await E.e(v.a.Xml.workspaceToDom(w.blocklyWorkspace));localStorage.setItem("blockly/json/"+N,e)},6e4)}else try{let t=await e.fetchSolution(),a=await E.b(t);v.a.Xml.domToWorkspace(a,w.blocklyWorkspace)}catch(t){console.log(t)}E.d(function(e){let t=v.a.Xml.workspaceToDom(w.blocklyWorkspace),a=t.getElementsByTagName("field");for(let t of a)if(t.attributes&&t.attributes.name&&"BLOB_URL"==t.attributes.name.value&&t.textContent==e)return!0;return!1}),document.body.removeChild(document.getElementById("loading"))}a.d(t,"a",function(){return A}),a.d(t,"b",function(){return i});var s=a(26);const r=s.a();r&&"chrome"==r.name||alert("\u5F53\u524D\u6D4F\u89C8\u5668\u53EF\u80FD\u5B58\u5728\u517C\u5BB9\u6027\u95EE\u9898\uFF0C\u63A8\u8350\u4F7F\u7528\u6700\u65B0\u7248\u8C37\u6B4C\u6D4F\u89C8\u5668(Google Chrome)\u3002\u4E0B\u8F7D\u9875\u9762\uFF1Ahttps://www.google.cn/chrome/");var d=a(19),c=a.n(d),u=a(32),p=a(46),m=a(3),_=a(18),b=a(0),v=a.n(b),g=a(13),y=a(29),h=a.n(y),T=a(30),k=a.n(T),E=a(7),S=a(11),f=a(10);document.getElementById("realContents").innerHTML=c.a;var w={};const N=document.title;var O={};const x=Object(_.a)(["#blocklyWorkspaceContainer","#blocklyConsole"],{sizes:[50,50],minSize:[0,0],onDragEnd:function(){v.a.svgResize(w.blocklyWorkspace),O.layoutChangeListener&&O.layoutChangeListener()}}),I=Object(_.a)(["#blocklyOutput","#blocklyDevloperTools"],{sizes:[80,20],minSize:[0,0],direction:"vertical",onDragEnd:function(){O.layoutChangeListener&&O.layoutChangeListener()}});document.getElementById("downloadAsJsonButton").onclick=async function(){try{let e=await E.e(v.a.Xml.workspaceToDom(w.blocklyWorkspace)),t=new Blob([e],{type:"application/json;charset=utf-8"});g.saveAs(t,N+".json")}catch(t){console.log(t),alert("\u4E0B\u8F7D\u5931\u8D25\uFF01")}},document.getElementById("uploadJsonFileInput").addEventListener("change",function(){if(0!=this.files.length){const e=new FileReader;e.onload=async function(t){try{w.blocklyWorkspace.clear();let e=await E.c(t.target.result);v.a.Xml.domToWorkspace(e,w.blocklyWorkspace)}catch(t){console.log(t),alert("\u4E0A\u4F20\u5931\u8D25\uFF01")}},e.readAsText(this.files[0])}},!1),document.getElementById("uploadJsonButton").onclick=function(){document.getElementById("uploadJsonFileInput").click()},document.getElementById("countBlocksButton").onclick=function(){alert("\u4E00\u5171"+w.blocklyWorkspace.getAllBlocks().length+"\u4E2A\u5757\uFF01")},document.getElementById("resetWorkspaceButton").onclick=function(){confirm("\u8BE5\u64CD\u4F5C\u4F1A\u5220\u9664\u5F53\u524D\u4EE3\u7801\uFF0C\u8BF7\u786E\u8BA4\uFF01")&&w.reset()},document.getElementById("resetLayoutButton").onclick=function(){x.setSizes([50,50]),I.setSizes([80,20]),O.layoutChangeListener&&O.layoutChangeListener(),v.a.svgResize(w.blocklyWorkspace)},document.getElementById("maximizeOutputButton").onclick=function(){x.setSizes([0,100]),I.setSizes([100,0]),O.layoutChangeListener&&O.layoutChangeListener()};const A={SLOW:1,NORMAL:2,FAST:3};var C=document.getElementById("speedButtons").children;C[0].onclick=o.bind(void 0,A.SLOW),C[1].onclick=o.bind(void 0,A.NORMAL),C[2].onclick=o.bind(void 0,A.FAST);var R=document.getElementById("runOrPauseButton");R.onclick=function(){w.run()};var B=document.getElementById("stepButton");B.onclick=function(){w.step()};var M=document.getElementById("stopButton");M.onclick=function(){w.stop()},document.getElementById("downloadAsJavaScriptButton").onclick=function(){var e=v.a.JavaScript.workspaceToCode(w.blocklyWorkspace),t=new Blob([e],{type:"text/plain;charset=utf-8"});g.saveAs(t,N+".js")},document.getElementById("downloadAsXmlButton").onclick=function(){let e=v.a.Xml.domToPrettyText(v.a.Xml.workspaceToDom(w.blocklyWorkspace)),t=new Blob([e],{type:"text/plain;charset=utf-8"});g.saveAs(t,N+".xml")},document.getElementById("downloadAsExtendedJavaScriptButton").onclick=function(){var e=w.generateJavaScript(),t=new Blob([e],{type:"text/plain;charset=utf-8"});g.saveAs(t,N+".js")},document.getElementById("saveToLocalStorageButton").onclick=async function(){let e=await E.e(v.a.Xml.workspaceToDom(w.blocklyWorkspace));localStorage.setItem("blockly/json/"+N,e),alert("\u5DF2\u4FDD\u5B58\uFF01")},document.getElementById("clearLocalStorageButton").onclick=function(){localStorage.clear(),alert("\u7F13\u5B58\u5DF2\u6E05\u7A7A\uFF01")},document.getElementById("reportBugButton").onclick=function(){window.open("https://gitee.com/zhouxiaobo1990/beginner-programming/issues/new","_blank")},document.getElementById("showCreditButton").onclick=function(){window.open(f.join(a.p,"pages/attributions.html"),"_blank")}},19:function(e,t,a){var o=a(41),n=a(31),l=o(n);e.exports="<div id=invisibleElements style=display:none> <input id=uploadJsonFileInput type=file accept=application/json /> <input id=uploadImageFileInput type=file accept=image/* /> </div> <div class=navbar> <a href=../index.html><img id=logo src="+l+" /></a> <div class=subnav> <div class=navbtn>\u5DE5\u4F5C\u53F0</div> <div class=subnav-content> <div class=subnavbtn id=downloadAsJsonButton>\u4E0B\u8F7DJSON\u4EE3\u7801</div> <div class=subnavbtn id=uploadJsonButton>\u4E0A\u4F20JSON\u4EE3\u7801</div> <div class=subnavbtn id=countBlocksButton>\u7EDF\u8BA1\u5757\u7684\u4E2A\u6570</div> <div class=subnavbtn id=resetWorkspaceButton>\u91CD\u7F6E\u4EE3\u7801</div> </div> </div> <div class=subnav> <div class=navbtn>\u663E\u793A</div> <div class=subnav-content> <div class=subnavbtn id=resetLayoutButton>\u91CD\u7F6E\u5E03\u5C40</div> <div class=subnavbtn id=maximizeOutputButton>\u5168\u5C4F\u663E\u793A\u8F93\u51FA</div> </div> </div> <div class=subnav> <div class=navbtn>\u8FD0\u884C\u901F\u5EA6</div> <div class=subnav-content id=speedButtons> <div class=subnavbtn>\u6162\u901F</div> <div class=subnavbtn>\u6B63\u5E38</div> <div class=subnavbtn>\u5FEB\u901F</div> </div> </div> <div class=subnav> <div class=navbtn>\u9AD8\u7EA7\u529F\u80FD</div> <div class=subnav-content> <div class=subnavbtn id=downloadAsJavaScriptButton> \u4E0B\u8F7DJavaScript\u4EE3\u7801 </div> <div class=subnavbtn id=downloadAsXmlButton> \u4E0B\u8F7DXML\u4EE3\u7801 </div> <div class=subnavbtn id=downloadAsExtendedJavaScriptButton> \u4E0B\u8F7D\u6269\u5C55\u540E\u7684JavaScript\u4EE3\u7801 </div> <div class=subnavbtn id=saveToLocalStorageButton> \u4FDD\u5B58\u5230\u672C\u5730\u7F13\u5B58 </div> <div class=subnavbtn id=clearLocalStorageButton> \u6E05\u7A7A\u672C\u5730\u7F13\u5B58 </div> </div> </div> <div class=\"subnav unremovable\"> <div class=navbtn>\u5173\u4E8E</div> <div class=subnav-content> <div class=subnavbtn id=reportBugButton> Bug\u53CD\u9988 </div> <div class=subnavbtn id=showCreditButton> Credit </div> </div> </div> <div class=buttonsContainer> <button type=button id=showHelpDialogButton> <i class=material-icons>help</i> </button> <button type=button id=runOrPauseButton> \u8FD0\u884C<i class=material-icons>play_arrow</i> </button> <button type=button id=stepButton> \u5355\u6B65\u8FD0\u884C<i class=material-icons>play_arrow</i><i class=material-icons>pause</i> </button> <button type=button id=stopButton disabled=disabled> \u7EC8\u6B62\u7A0B\u5E8F<i class=material-icons>stop</i> </button> </div> </div> <div class=main> <div id=blocklyWorkspaceContainer> <div id=blocklyWorkspace></div> </div> <div id=blocklyConsole> <div id=blocklyOutput> <div id=blocklyTextPrintOutput></div> </div> <div id=blocklyDevloperTools> <nav class=js-tabs__nav> <ul class=js-tabs__tabs-container> <li class=\"js-tabs__tab active\">\u65E5\u5FD7</li> <li class=js-tabs__tab>\u8C03\u8BD5</li> <li class=js-tabs__tab>\u56FE\u7247</li> </ul> <div class=js-tabs__marker></div> </nav> <ul class=js-tabs__content-container> <li class=\"js-tabs__content active\"> <div id=blocklyLogArea></div> </li> <li class=js-tabs__content> <div id=blocklyVariableTable></div> </li> <li class=js-tabs__content> <div id=imageCollections></div> </li> </ul> </div> </div> </div> <div id=helpDialog> <div id=helpDialogDragHandle> \u4EFB\u52A1\u76EE\u6807 <span id=helpDialogShowDemoButton> [\u793A\u4F8B] </span> <span id=helpDialogCloseButton> <i class=material-icons>close</i> </span> </div> <div id=helpDialogContents></div> </div> "},20:function(e){e.exports="<label> \u8BF7\u9009\u62E9\u9700\u8981\u89C2\u6D4B\u7684\u53D8\u91CF\uFF1A <select id=varialeTableSelector> <option disabled=disabled selected=selected hidden>\u53D8\u91CF\u5217\u8868</option> </select> </label> <div id=varialeTableSelectedVariables></div> "},21:function(e,t){"use strict";t.a="<xml xmlns=\"https://developers.google.com/blockly/xml\">\n  <category name=\"\u79FB\u52A8\" colour=\"%{BKY_CUSTOM_HUE}\">\n    <block type=\"custom_turtle_environment_move\">\n      <value name=\"DISTANCE\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_move_to_coordinate\">\n      <value name=\"X\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0</field>\n        </shadow>\n      </value>\n      <value name=\"Y\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_get_coordinate\">\n    </block>\n    <block type=\"custom_turtle_environment_turn\">\n      <value name=\"ANGLE\">\n        <shadow type=\"custom_angle\">\n          <field name=\"ANGLE\">90</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_turn_to_angle\">\n      <value name=\"ANGLE\">\n        <shadow type=\"custom_angle\">\n          <field name=\"ANGLE\">90</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_get_angle\">\n    </block>\n  </category>\n  <category name=\"\u753B\u7B14\" colour=\"%{BKY_CUSTOM_HUE}\">\n    <block type=\"custom_turtle_environment_set_pen\">\n    </block>\n    <block type=\"custom_turtle_environment_set_pen_color\">\n      <value name=\"COLOUR\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#000000</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_set_pen_width\">\n      <value name=\"WIDTH\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_prepare_fill\">\n      <value name=\"COLOUR\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#000000</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_finish_fill\">\n    </block>\n  </category>\n  <category name=\"\u55B7\u6F06\" colour=\"%{BKY_CUSTOM_HUE}\">\n    <block type=\"custom_turtle_environment_draw_shape\">\n      <value name=\"COLOUR\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#000000</field>\n        </shadow>\n      </value>\n      <value name=\"WIDTH\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">100</field>\n        </shadow>\n      </value>\n      <value name=\"HEIGHT\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">50</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_draw_text\">\n      <value name=\"TEXT\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n      <value name=\"COLOUR\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#000000</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_turtle_environment_draw_image\">\n    </block>\n  </category>\n  <category name=\"\u8F93\u5165\" colour=\"%{BKY_CUSTOM_HUE}\">\n    <block type=\"text_prompt_ext\">\n      <value name=\"TEXT\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"custom_is_key_down\">\n    </block>\n    <block type=\"custom_turtle_environment_get_mouse_coordinate\">\n    </block>\n    <block type=\"custom_turtle_environment_is_mouse_key_down\">\n    </block>\n  </category>\n  <category name=\"\u5176\u4ED6\" colour=\"%{BKY_CUSTOM_HUE}\">\n    <block type=\"custom_turtle_environment_set_visibility\">\n    </block>\n    <block type=\"custom_turtle_environment_clear_canvas\">\n    </block>\n    <block type=\"custom_wait_seconds\">\n      <value name=\"SECONDS\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <sep></sep>\n  <category name=\"\u903B\u8F91\" colour=\"%{BKY_LOGIC_HUE}\">\n    <block type=\"controls_if\"></block>\n    <block type=\"logic_compare\"></block>\n    <block type=\"logic_operation\"></block>\n    <block type=\"logic_negate\"></block>\n    <block type=\"logic_boolean\"></block>\n    <block type=\"logic_null\"></block>\n    <block type=\"logic_ternary\"></block>\n  </category>\n  <category name=\"\u5FAA\u73AF\" colour=\"%{BKY_LOOPS_HUE}\">\n    <block type=\"controls_repeat_ext\">\n      <value name=\"TIMES\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">10</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"controls_whileUntil\"></block>\n    <block type=\"controls_for\">\n      <value name=\"FROM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n      <value name=\"TO\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">10</field>\n        </shadow>\n      </value>\n      <value name=\"BY\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"controls_forEach\"></block>\n    <block type=\"controls_flow_statements\"></block>\n  </category>\n  <category name=\"\u6570\u5B66\" colour=\"%{BKY_MATH_HUE}\">\n    <block type=\"math_number\">\n      <field name=\"NUM\">123</field>\n    </block>\n    <block type=\"math_arithmetic\">\n      <value name=\"A\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n      <value name=\"B\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_single\">\n      <value name=\"NUM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">9</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_trig\">\n      <value name=\"NUM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">45</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_constant\"></block>\n    <block type=\"math_number_property\">\n      <value name=\"NUMBER_TO_CHECK\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_round\">\n      <value name=\"NUM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">3.1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_on_list\"></block>\n    <block type=\"math_modulo\">\n      <value name=\"DIVIDEND\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">64</field>\n        </shadow>\n      </value>\n      <value name=\"DIVISOR\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">10</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_constrain\">\n      <value name=\"VALUE\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">50</field>\n        </shadow>\n      </value>\n      <value name=\"LOW\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n      <value name=\"HIGH\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">100</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_random_int\">\n      <value name=\"FROM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n      <value name=\"TO\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">100</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"math_random_float\"></block>\n    <block type=\"math_atan2\">\n      <value name=\"X\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n      <value name=\"Y\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">1</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <category name=\"\u6587\u672C\" colour=\"%{BKY_TEXTS_HUE}\">\n    <block type=\"text\"></block>\n    <block type=\"text_join\"></block>\n    <block type=\"text_append\">\n      <value name=\"TEXT\">\n        <shadow type=\"text\"></shadow>\n      </value>\n    </block>\n    <block type=\"text_length\">\n      <value name=\"VALUE\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"text_isEmpty\">\n      <value name=\"VALUE\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\"></field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"text_indexOf\">\n      <value name=\"VALUE\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u6587\u672C</field>\n        </block>\n      </value>\n      <value name=\"FIND\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"text_charAt\">\n      <value name=\"VALUE\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u6587\u672C</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"text_getSubstring\">\n      <value name=\"STRING\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u6587\u672C</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"text_changeCase\">\n      <value name=\"TEXT\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"text_trim\">\n      <value name=\"TEXT\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">abc</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <category name=\"\u5217\u8868\" colour=\"%{BKY_LISTS_HUE}\">\n    <block type=\"lists_create_with\">\n      <mutation items=\"0\"></mutation>\n    </block>\n    <block type=\"lists_create_with\"></block>\n    <block type=\"lists_repeat\">\n      <value name=\"NUM\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">5</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"lists_length\"></block>\n    <block type=\"lists_isEmpty\"></block>\n    <block type=\"lists_indexOf\">\n      <value name=\"VALUE\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u5217\u8868</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"lists_getIndex\">\n      <value name=\"VALUE\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u5217\u8868</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"lists_setIndex\">\n      <value name=\"LIST\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u5217\u8868</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"lists_getSublist\">\n      <value name=\"LIST\">\n        <block type=\"variables_get\">\n          <field name=\"VAR\">\u5217\u8868</field>\n        </block>\n      </value>\n    </block>\n    <block type=\"lists_split\">\n      <value name=\"DELIM\">\n        <shadow type=\"text\">\n          <field name=\"TEXT\">,</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"lists_sort\"></block>\n  </category>\n  <category name=\"\u989C\u8272\" colour=\"%{BKY_COLOUR_HUE}\">\n    <block type=\"colour_picker\"></block>\n    <block type=\"colour_random\"></block>\n    <block type=\"colour_rgb\">\n      <value name=\"RED\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">100</field>\n        </shadow>\n      </value>\n      <value name=\"GREEN\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">50</field>\n        </shadow>\n      </value>\n      <value name=\"BLUE\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type=\"colour_blend\">\n      <value name=\"COLOUR1\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#ff0000</field>\n        </shadow>\n      </value>\n      <value name=\"COLOUR2\">\n        <shadow type=\"colour_picker\">\n          <field name=\"COLOUR\">#3333ff</field>\n        </shadow>\n      </value>\n      <value name=\"RATIO\">\n        <shadow type=\"math_number\">\n          <field name=\"NUM\">0.5</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <sep></sep>\n  <category name=\"\u53D8\u91CF\" colour=\"%{BKY_VARIABLES_HUE}\" custom=\"VARIABLE\"></category>\n  <category name=\"\u51FD\u6570\" colour=\"%{BKY_PROCEDURES_HUE}\" custom=\"PROCEDURE\"></category>\n</xml>\n"},23:function(e){e.exports="<div id=pixiOutput> <canvas id=pixiCanvas></canvas> <div id=pixiContainer></div> </div> "},24:function(e){e.exports="<div class=container id=uploadImageButton> <i class=material-icons style=font-size:48px>add</i> </div> "},25:function(e,t,a){"use strict";function o(){_=document.getElementById("uploadImageFileInput"),b=document.getElementById("imageCollections"),b.innerHTML=R.a,v=document.getElementById("uploadImageButton"),_.addEventListener("change",function(){if(0!=this.files.length){Object(I.a)(this.files[0],{maxSizeMB:.1,maxWidthOrHeight:400,useWebWorker:!0}).then(function(e){M.createBlob(e,{})}).catch(function(e){console.log(e.message)})}},!1),v.onclick=function(){_.click()}}function n(){return M.getBlobUrls()}function l(){return Math.max(Math.min(P.offsetWidth-30,P.offsetHeight-10),3)}function i(){var e=Math.round,t=l();D=(t-2)/G,X.width=t+30,X.height=t+10;const a=X.getContext("2d");a.clearRect(0,0,t+30,t+10);for(let o=1;10>o;++o)a.beginPath(),a.moveTo(.1*t*o,t),a.lineTo(.1*t*o,t+10),a.stroke(),a.fillText(e((.1*o-.5)*G),.1*t*o+2,t+10),a.beginPath(),a.moveTo(t,.1*t*o),a.lineTo(t+10,.1*t*o),a.stroke(),a.fillText(e((.1*o-.5)*G),t+2,.1*t*o+10);H.style.width=t+"px",H.style.height=t+"px",Y&&(Y.stage.scale.x=D,Y.stage.scale.y=D)}function s(e){return e+.5*G}function r(e){return e-.5*G}function d(e){return .5*G-e}function c(e){return .5*G-e}function u(e){return e<-.5*G&&(e=-.5*G),e>.5*G&&(e=.5*G),e}function p(e){return e*(Math.PI/180)}async function m(e){let t=Y.loader.add("turtle",x.join(a.p,"images/turtle.png")),n=await new Promise((e)=>t.load((t,a)=>e(a)));o(),Y.stage.interactive=!0,Y.stage.hitArea=new f.e(0,0,G,G),Y.stage.on("mousedown",function(t){K.leftButton.down=!0;let e=t.currentTarget.toLocal(t.data.global);K.x=u(r(e.x)),K.y=u(c(e.y))}),Y.stage.on("rightdown",function(t){K.rightButton.down=!0;let e=t.currentTarget.toLocal(t.data.global);K.x=u(r(e.x)),K.y=u(c(e.y))}),Y.stage.on("mousemove",function(t){let e=t.currentTarget.toLocal(t.data.global);K.x=u(r(e.x)),K.y=u(c(e.y))}),Y.stage.on("mouseup",function(t){let e=t.currentTarget.toLocal(t.data.global);K.x=u(r(e.x)),K.y=u(c(e.y)),K.leftButton={down:!1,lastDownTime:new Date().getTime(),lastDownX:K.x,lastDownY:K.y}}),Y.stage.on("rightup",function(t){let e=t.currentTarget.toLocal(t.data.global);K.x=u(r(e.x)),K.y=u(c(e.y)),K.rightButton={down:!1,lastDownTime:new Date().getTime(),lastDownX:K.x,lastDownY:K.y}}),Y.stage.on("mouseupoutside",function(){K.leftButton={down:!1,lastDownTime:new Date().getTime(),lastDownX:K.x,lastDownY:K.y}}),Y.stage.on("rightupoutside",function(){K.rightButton={down:!1,lastDownTime:new Date().getTime(),lastDownX:K.x,lastDownY:K.y}});let l=n.turtle.texture;V=new W(l,Y.stage),await g.b({toolbox:e.toolbox,fetchInitial:e.fetchInitial,fetchSolution:e.fetchSolution,stateUpdateListener:function(e){e==w.c.INITIAL&&(Y.stage.removeChildren(),F=new f.c,Y.stage.addChild(F),V=new W(l,Y.stage),J=new j(F))},runningSpeed:g.a.FAST,environmentVariables:[{name:"\u4E4C\u9F9F\u7684\u6A2A\u5750\u6807",symbol:w.b+"."+L+".getCoordinateX()"},{name:"\u4E4C\u9F9F\u7684\u7EB5\u5750\u6807",symbol:w.b+"."+L+".getCoordinateY()"},{name:"\u4E4C\u9F9F\u7684\u65B9\u5411",symbol:w.b+"."+L+".getAngle()"}],layoutChangeListener:function(){i(),Y.resize()}})}a.d(t,"a",function(){return m});var _,b,v,g=a(17),y=a(21),h=a(23),T=a.n(h),k=a(42),E=a(0),S=a.n(E),f=a(6),w=a(3),N=a(38),O=a(9),x=a(10),I=a(39),A=a(44),C=a(24),R=a.n(C),B=a(7);const M=new B.a("image",{blobAddListener:function(e,t){let a=document.createElement("div"),o=document.createElement("div");o.classList.add("container");let n=document.createElement("img");if(n.src=e,o.appendChild(n),a.appendChild(o),!t.unremovable){let t=document.createElement("div");t.classList.add("removeButton"),t.innerHTML="<i class=\"material-icons\">delete</i>",t.onclick=function(){this.removeBlob(e)}.bind(this),a.appendChild(t)}b.insertBefore(a,v)},blobRemoveListener:function(e){let t=b.children;if(t)for(let a of t)if("uploadImageButton"!=a.id&&a.children[0].children[0].src==e)return void b.removeChild(a)}}),L="turtleEnvironment";S.a.defineBlocksWithJsonArray([{type:"custom_turtle_environment_move",message0:"%1 %2",args0:[{type:"field_dropdown",name:"DIRECTION",options:[["\u524D\u8FDB\u6307\u5B9A\u8DDD\u79BB","moveForward"],["\u540E\u9000\u6307\u5B9A\u8DDD\u79BB","moveBackward"]]},{type:"input_value",name:"DISTANCE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_move_to_coordinate",message0:"\u5E73\u79FB\u5230\u5750\u6807( %1 , %2 )",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_get_coordinate",message0:"\u83B7\u53D6\u5F53\u524D\u4F4D\u7F6E\u7684 %1",args0:[{type:"field_dropdown",name:"AXIS",options:[["\u6A2A\u5750\u6807","getCoordinateX"],["\u7EB5\u5750\u6807","getCoordinateY"]]}],output:"Number",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_turn",message0:"%1 %2",args0:[{type:"field_dropdown",name:"DIRECTION",options:[["\u5DE6\u8F6C\u21BA","turnLeft"],["\u53F3\u8F6C\u21BB","turnRight"]]},{type:"input_value",name:"ANGLE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_turn_to_angle",message0:"\u6539\u53D8\u5F53\u524D\u65B9\u5411 %1",args0:[{type:"input_value",name:"ANGLE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_get_angle",message0:"\u83B7\u53D6\u5F53\u524D\u65B9\u5411",output:"Number",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_pen",message0:"%1",args0:[{type:"field_dropdown",name:"PEN",options:[["\u63D0\u8D77\u7B14","penUp"],["\u843D\u4E0B\u7B14","penDown"]]}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_visibility",message0:"%1",args0:[{type:"field_dropdown",name:"VISIBILITY",options:[["\u663E\u793A\u4E4C\u9F9F","show"],["\u9690\u85CF\u4E4C\u9F9F","hide"]]}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_pen_color",message0:"\u5C06\u7B14\u7684\u989C\u8272\u8BBE\u7F6E\u4E3A %1",args0:[{type:"input_value",name:"COLOUR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_pen_width",message0:"\u5C06\u7B14\u7684\u7C97\u7EC6\u8BBE\u7F6E\u4E3A %1",args0:[{type:"input_value",name:"WIDTH",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_prepare_fill",message0:"\u51C6\u5907\u5C06\u56F4\u4F4F\u7684\u533A\u57DF\u586B\u5145\u4E3A %1",args0:[{type:"input_value",name:"COLOUR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_finish_fill",message0:"\u5B8C\u6210\u586B\u5145",previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_draw_shape",message0:"\u753B %1",args0:[{type:"field_dropdown",name:"SHAPE",options:[["\u692D\u5706","drawEllipse"],["\u77E9\u5F62","drawRectangle"]]}],message1:"\u989C\u8272 %1",args1:[{type:"input_value",name:"COLOUR",check:"Colour",align:"RIGHT"}],message2:"\u5BBD\u5EA6 %1",args2:[{type:"input_value",name:"WIDTH",check:"Number",align:"RIGHT"}],message3:"\u9AD8\u5EA6 %1",args3:[{type:"input_value",name:"HEIGHT",check:"Number",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_draw_text",message0:"\u753B\u6587\u672C %1",args0:[{type:"input_value",name:"TEXT",align:"RIGHT"}],message1:"\u989C\u8272 %1",args1:[{type:"input_value",name:"COLOUR",check:"Colour",align:"RIGHT"}],previousStatement:null,nextStatement:null,mutator:"custom_turtle_environment_draw_text_mutator",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_draw_image",message0:"\u753B\u56FE\u7247 %1",args0:[{type:"input_dummy",name:"INPUT",align:"RIGHT"}],previousStatement:null,nextStatement:null,mutator:"custom_turtle_environment_draw_image_mutator",colour:"%{BKY_CUSTOM_HUE}",extensions:["custom_turtle_environment_draw_image_extension"]},{type:"custom_turtle_environment_get_mouse_coordinate",message0:"\u83B7\u53D6\u9F20\u6807 %1 \u7684 %2",args0:[{type:"field_dropdown",name:"SITUATION",options:[["\u5F53\u524D\u4F4D\u7F6E","CURRENT"],["\u4E0A\u4E00\u6B21\u6309\u4E0B\u5DE6\u952E\u65F6","LAST_LEFT_DOWN"],["\u4E0A\u4E00\u6B21\u6309\u4E0B\u53F3\u952E\u65F6","LAST_RIGHT_DOWN"]]},{type:"field_dropdown",name:"AXIS",options:[["\u6A2A\u5750\u6807","X"],["\u7EB5\u5750\u6807","Y"]]}],output:"Number",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_is_mouse_key_down",inputsInline:!0,message0:"%1",args0:[{type:"field_dropdown",name:"BUTTON",options:[["\u9F20\u6807\u5DE6\u952E","LEFT"],["\u9F20\u6807\u53F3\u952E","RIGHT"]]}],message1:"\u662F\u5426\u88AB\u6309\u4E0B %1",args1:[{type:"input_dummy",name:"INPUT_TAIL"}],output:"Boolean",mutator:"custom_turtle_environment_is_mouse_key_down_mutator",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_clear_canvas",message0:"\u6E05\u7A7A\u753B\u5E03",previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"}]),w.e({name:"custom_turtle_environment_draw_text_mutator",optionalFields:[{name:"FONT_SIZE",description:"\u5B57\u4F53\u5927\u5C0F",type:"Number",defaultValue:"20"},{name:"SCALE_X",description:"\u6C34\u5E73\u7F29\u653E",type:"Number",defaultValue:"1"},{name:"SCALE_Y",description:"\u5782\u76F4\u7F29\u653E",type:"Number",defaultValue:"1"}]}),w.e({name:"custom_turtle_environment_draw_image_mutator",optionalFields:[{name:"SCALE_X",description:"\u6C34\u5E73\u7F29\u653E",type:"Number",defaultValue:"1"},{name:"SCALE_Y",description:"\u5782\u76F4\u7F29\u653E",type:"Number",defaultValue:"1"}]}),S.a.Extensions.register("custom_turtle_environment_draw_image_extension",function(){this.getInput("INPUT").appendField(new S.a.FieldDropdown(function(){let e=n(),t=[];for(let a of e)t.push([{src:a,width:50,height:50},a]);return t.length||t.push(["",""]),t}),"BLOB_URL")}),w.e({name:"custom_turtle_environment_is_mouse_key_down_mutator",optionalFields:[{name:"SECONDS",description:"\u67E5\u770B\u6700\u8FD1\u7684\u4E00\u6BB5\u65F6\u95F4\u5185",message:"\u5728\u6700\u8FD1\u7684 %1 \u79D2\u5185",type:"Number",defaultValue:"1"}],insertBefore:"INPUT_TAIL"}),S.a.JavaScript.custom_turtle_environment_move=function(e){let t=S.a.JavaScript.valueToCode(e,"DISTANCE",S.a.JavaScript.ORDER_NONE)||"0";return w.b+"."+L+"."+e.getFieldValue("DIRECTION")+"("+t+");\n"},S.a.JavaScript.custom_turtle_environment_move_to_coordinate=function(e){let t=S.a.JavaScript.valueToCode(e,"X",S.a.JavaScript.ORDER_COMMA)||"0",a=S.a.JavaScript.valueToCode(e,"Y",S.a.JavaScript.ORDER_COMMA)||"0";return w.b+"."+L+".moveToCoordinate("+t+", "+a+");\n"},S.a.JavaScript.custom_turtle_environment_get_coordinate=function(e){return[w.b+"."+L+"."+e.getFieldValue("AXIS")+"()",S.a.JavaScript.ORDER_MEMBER]},S.a.JavaScript.custom_turtle_environment_turn=function(e){let t=S.a.JavaScript.valueToCode(e,"ANGLE",S.a.JavaScript.ORDER_NONE)||"0";return w.b+"."+L+"."+e.getFieldValue("DIRECTION")+"("+t+");\n"},S.a.JavaScript.custom_turtle_environment_turn_to_angle=function(e){let t=S.a.JavaScript.valueToCode(e,"ANGLE",S.a.JavaScript.ORDER_NONE)||"90";return w.b+"."+L+".turnToAngle("+t+");\n"},S.a.JavaScript.custom_turtle_environment_get_angle=function(){return[w.b+"."+L+".getAngle()",S.a.JavaScript.ORDER_MEMBER]},S.a.JavaScript.custom_turtle_environment_set_pen=function(e){return w.b+"."+L+"."+e.getFieldValue("PEN")+"();\n"},S.a.JavaScript.custom_turtle_environment_set_visibility=function(e){return w.b+"."+L+"."+e.getFieldValue("VISIBILITY")+"();\n"},S.a.JavaScript.custom_turtle_environment_set_pen_color=function(e){let t=S.a.JavaScript.valueToCode(e,"COLOUR",S.a.JavaScript.ORDER_NONE)||"";return w.b+"."+L+".setPenColor("+t+");\n"},S.a.JavaScript.custom_turtle_environment_set_pen_width=function(e){let t=S.a.JavaScript.valueToCode(e,"WIDTH",S.a.JavaScript.ORDER_NONE)||"0";return w.b+"."+L+".setPenWidth("+t+");\n"},S.a.JavaScript.custom_turtle_environment_prepare_fill=function(e){let t=S.a.JavaScript.valueToCode(e,"COLOUR",S.a.JavaScript.ORDER_NONE)||"";return w.b+"."+L+".prepareFill("+t+");\n"},S.a.JavaScript.custom_turtle_environment_finish_fill=function(){return w.b+"."+L+".finishFill();\n"},S.a.JavaScript.custom_turtle_environment_draw_shape=function(e){let t=S.a.JavaScript.valueToCode(e,"COLOUR",S.a.JavaScript.ORDER_COMMA)||"",a=S.a.JavaScript.valueToCode(e,"WIDTH",S.a.JavaScript.ORDER_COMMA)||"0",o=S.a.JavaScript.valueToCode(e,"HEIGHT",S.a.JavaScript.ORDER_COMMA)||"0";return w.b+"."+L+"."+e.getFieldValue("SHAPE")+"("+t+", "+a+", "+o+");\n"},S.a.JavaScript.custom_turtle_environment_draw_text=function(e){let t=S.a.JavaScript.valueToCode(e,"TEXT",S.a.JavaScript.ORDER_COMMA)||"",a=S.a.JavaScript.valueToCode(e,"COLOUR",S.a.JavaScript.ORDER_COMMA)||"",o=S.a.JavaScript.valueToCode(e,"FONT_SIZE",S.a.JavaScript.ORDER_COMMA)||"20",n=S.a.JavaScript.valueToCode(e,"SCALE_X",S.a.JavaScript.ORDER_COMMA)||"1",l=S.a.JavaScript.valueToCode(e,"SCALE_Y",S.a.JavaScript.ORDER_COMMA)||"1";return w.b+"."+L+".drawText("+t+", "+a+", "+o+", "+n+", "+l+");\n"},S.a.JavaScript.custom_turtle_environment_draw_image=function(e){let t=S.a.JavaScript.quote_(e.getFieldValue("BLOB_URL")),a=S.a.JavaScript.valueToCode(e,"SCALE_X",S.a.JavaScript.ORDER_COMMA)||"1",o=S.a.JavaScript.valueToCode(e,"SCALE_Y",S.a.JavaScript.ORDER_COMMA)||"1";return w.b+"."+L+".drawImage("+t+", "+a+", "+o+");\n"},S.a.JavaScript.custom_turtle_environment_get_mouse_coordinate=function(e){return[w.b+"."+L+".getMouseCoordinate(\""+e.getFieldValue("AXIS")+"\", \""+e.getFieldValue("SITUATION")+"\")",S.a.JavaScript.ORDER_MEMBER]},S.a.JavaScript.custom_turtle_environment_is_mouse_key_down=function(e){let t=S.a.JavaScript.valueToCode(e,"SECONDS",S.a.JavaScript.ORDER_COMMA)||"0";return[w.b+"."+L+".isMouseKeyDown(\""+e.getFieldValue("BUTTON")+"\", "+t+")",S.a.JavaScript.ORDER_MEMBER]},S.a.JavaScript.custom_turtle_environment_clear_canvas=function(){return w.b+"."+L+".clearCanvas();\n"},w.d(L,function(e,t){var a=Math.sin,o=Math.cos;let n=e.createNativeFunction(function(e){if(V.draw){var t=new f.d;t.lineStyle(V.width,V.color).moveTo(s(V.x),d(V.y))}V.x+=o(p(V.angle))*e,V.y+=a(p(V.angle))*e,J.recordNewPosition(V.x,V.y),V.annimate(),V.draw&&(t.lineTo(s(V.x),d(V.y)),F.addChild(t))});e.setProperty(t,"moveForward",n),n=e.createNativeFunction(function(e){if(V.draw){var t=new f.d;t.lineStyle(V.width,V.color).moveTo(s(V.x),d(V.y))}V.x-=o(p(V.angle))*e,V.y-=a(p(V.angle))*e,J.recordNewPosition(V.x,V.y),V.annimate(),V.draw&&(t.lineTo(s(V.x),d(V.y)),F.addChild(t))}),e.setProperty(t,"moveBackward",n),n=e.createNativeFunction(function(e,t){if(V.draw){var a=new f.d;a.lineStyle(V.width,V.color).moveTo(s(V.x),d(V.y))}V.x=e,V.y=t,J.recordNewPosition(V.x,V.y),V.annimate(),V.draw&&(a.lineTo(s(V.x),d(V.y)),F.addChild(a))}),e.setProperty(t,"moveToCoordinate",n),n=e.createNativeFunction(function(){return V.x}),e.setProperty(t,"getCoordinateX",n),n=e.createNativeFunction(function(){return V.y}),e.setProperty(t,"getCoordinateY",n),n=e.createNativeFunction(function(e){V.angle+=e,V.annimate()}),e.setProperty(t,"turnLeft",n),n=e.createNativeFunction(function(e){V.angle-=e,V.annimate()}),e.setProperty(t,"turnRight",n),n=e.createNativeFunction(function(e){V.angle=e,V.annimate()}),e.setProperty(t,"turnToAngle",n),n=e.createNativeFunction(function(){return O.b(V.angle)}),e.setProperty(t,"getAngle",n),n=e.createNativeFunction(function(){V.draw=!1}),e.setProperty(t,"penUp",n),n=e.createNativeFunction(function(){V.draw=!0}),e.setProperty(t,"penDown",n),n=e.createNativeFunction(function(){V.sprite.visible=!0}),e.setProperty(t,"show",n),n=e.createNativeFunction(function(){V.sprite.visible=!1}),e.setProperty(t,"hide",n),n=e.createNativeFunction(function(e){O.c(e),V.color=O.a(e),V.annimate()}),e.setProperty(t,"setPenColor",n),n=e.createNativeFunction(function(e){V.width=e,V.annimate()}),e.setProperty(t,"setPenWidth",n),n=e.createNativeFunction(function(e){O.c(e),J.prepareFill(V.x,V.y,O.a(e))}),e.setProperty(t,"prepareFill",n),n=e.createNativeFunction(function(){J.finishFill()}),e.setProperty(t,"finishFill",n),n=e.createNativeFunction(function(e,t,a){O.c(e);let o=new f.d;o.beginFill(O.a(e)),o.drawEllipse(0,0,.5*t,.5*a),o.endFill(),o.x=V.sprite.x,o.y=V.sprite.y,o.angle=V.sprite.angle,F.addChild(o)}),e.setProperty(t,"drawEllipse",n),n=e.createNativeFunction(function(e,t,a){O.c(e);let o=new f.d;o.beginFill(O.a(e)),o.drawRect(.5*-t,.5*-a,t,a),o.endFill(),o.x=V.sprite.x,o.y=V.sprite.y,o.angle=V.sprite.angle,F.addChild(o)}),e.setProperty(t,"drawRectangle",n),n=e.createNativeFunction(function(e,t,a,o,n){O.c(t);let l=new f.g(e,{fill:O.a(t),fontSize:a});l.x=V.sprite.x,l.y=V.sprite.y,l.angle=V.sprite.angle,l.anchor.set(.5),l.scale.x=o,l.scale.y=n,F.addChild(l)}),e.setProperty(t,"drawText",n),n=e.createNativeFunction(function(e,t,a){if(e){let o=f.b.from(e),n=new f.h(o),l=new f.f(n);l.x=V.sprite.x,l.y=V.sprite.y,l.angle=V.sprite.angle,l.anchor.set(.5),l.scale.x=t,l.scale.y=a,F.addChild(l)}}),e.setProperty(t,"drawImage",n),n=e.createNativeFunction(function(e,t){if("CURRENT"==t||"LAST_LEFT_DOWN"==t&&K.leftButton.down||"LAST_RIGHT_DOWN"==t&&K.rightButton.down){if("X"==e)return K.x;if("Y"==e)return K.y}else if("LAST_LEFT_DOWN"==t){if("X"==e)return K.leftButton.lastDownX;if("Y"==e)return K.leftButton.lastDownY}else if("LAST_RIGHT_DOWN"==t){if("X"==e)return K.rightButton.lastDownX;if("Y"==e)return K.rightButton.lastDownY}throw"Invalid argument for getMouseCoordinate()"}),e.setProperty(t,"getMouseCoordinate",n),n=e.createNativeFunction(function(e,t){let a;if("LEFT"==e)a=K.leftButton;else if(e="RIGHT")a=K.rightButton;else throw"Invalid argument for isMouseKeyDown()";return!!a.down||a.lastDownTime+1e3*t>new Date().getTime()}),e.setProperty(t,"isMouseKeyDown",n),n=e.createNativeFunction(function(){F.removeChildren()}),e.setProperty(t,"clearCanvas",n)});var U=document.getElementById("blocklyOutput");U.innerHTML=T.a,U.addEventListener("contextmenu",(t)=>{t.preventDefault()});var D,F,V,J,P=document.getElementById("pixiOutput"),H=document.getElementById("pixiContainer"),X=document.getElementById("pixiCanvas"),G=400;i();var Y=new f.a({width:l()-2,height:l()-2,antialias:!0,transparent:!1,resizeTo:H,backgroundColor:16777215,resolution:1});H.appendChild(Y.view),Y.stage.interactive=!0,Y.stage.hitArea=new f.e(0,0,G,G),Y.stage.scale.x=D,Y.stage.scale.y=D;class W{constructor(e,t){this.sprite=new f.f(e),this.originalScale=1e-4*G,this.sprite.scale.x=this.originalScale,this.sprite.scale.y=this.originalScale,this.color=0,this.draw=!0,this.width=1,this.sprite.anchor.set(.5),this.x=0,this.y=0,this.angle=90,this.annimate(),t.addChild(this.sprite)}annimate(){var e=Math.exp;this.sprite.filters=[new N.a(0,this.color)],this.sprite.scale.x=this.originalScale*(2-e(-.2*this.width)),this.sprite.scale.y=this.originalScale*(2-e(-.2*this.width)),this.sprite.x=s(this.x),this.sprite.y=d(this.y),this.sprite.angle=90-this.angle}}class j{constructor(e){this.canvas=e}recordNewPosition(e,t){this.container&&this.coordinates.push({x:e,y:t})}prepareFill(e,t,a){if(this.container)throw"\u5B8C\u6210\u4E0A\u4E00\u6B21\u586B\u5145\u540E\uFF0C\u624D\u53EF\u8FDB\u884C\u65B0\u7684\u586B\u5145\uFF01";this.container=new f.c,this.canvas.addChild(this.container),this.coordinates=[{x:e,y:t}],this.color=a}finishFill(){if(!this.container)throw"\u5148\u51C6\u5907\u586B\u5145\uFF01";let e=new f.d;e.beginFill(this.color),e.moveTo(s(this.coordinates[0].x),d(this.coordinates[0].y));for(let t=1;t<this.coordinates.length;++t)e.lineTo(s(this.coordinates[t].x),d(this.coordinates[t].y));e.endFill(),this.container.addChild(e),this.container=null}}var K={x:0,y:0,leftButton:{down:!1,lastDownTime:0,lastDownX:0,lastDownY:0},rightButton:{down:!1,lastDownTime:0,lastDownX:0,lastDownY:0}}},3:function(e,t,a){"use strict";function o(e,t){if(_.has(e))return!0;let a=b.get(e);return!!a&&a+1e3*t>new Date().getTime()}function n(e,t){if(!e.endsWith("Environment"))throw"Environment name \""+e+"\" is invalid!";if(g.get(e))throw"Environment name \""+e+"\" is redefined!";g.set(e,t)}function l(e){let t=e.name+"_optional_fields";s.a.Blocks[t]={fields_:e.optionalFields,init:function(){this.appendDummyInput().appendField("\u66F4\u591A\u9009\u9879\uFF1A");for(let e of this.fields_)this.appendDummyInput().appendField(e.description).appendField(new s.a.FieldCheckbox(!1),e.name).setAlign(s.a.ALIGN_RIGHT)}};let a={selectedOptions_:new Set,fields_:e.optionalFields,insertBefore_:e.insertBefore,mutatorBlockName_:t,mutationToDom:function(){let e=s.a.utils.xml.createElement("mutation");for(let t of this.fields_)this.selectedOptions_.has(t.name)&&e.setAttribute(t.name,1);return e},domToMutation:function(e){this.selectedOptions_=new Set;for(let t of this.fields_)e.getAttribute(t.name)&&this.selectedOptions_.add(t.name);this.updateShape_()},decompose:function(e){let t=e.newBlock(this.mutatorBlockName_);t.setColour(this.getColour());for(let a of this.selectedOptions_)t.setFieldValue("TRUE",a);return t.initSvg(),t},compose:function(e){this.selectedOptions_=new Set;for(let t of this.fields_)"TRUE"==e.getFieldValue(t.name)&&this.selectedOptions_.add(t.name);this.updateShape_()},updateShape_:function(){let e=[];for(let t of this.fields_){if(!this.selectedOptions_.has(t.name))this.getInput(t.name)&&this.removeInput(t.name),this.getInput("_DUMMY_TAIL_"+t.name)&&this.removeInput("_DUMMY_TAIL_"+t.name);else if(!this.getInput(t.name))if("Number"==t.type){let e=this.workspace.newBlock("math_number");e.setShadow(!0),e.initSvg(),e.render(),e.setFieldValue(t.defaultValue,"NUM");let a=this.appendValueInput(t.name).setCheck("Number");if(t.message){let o=s.a.utils.tokenizeInterpolation(t.message);"number"!=typeof o[0]&&a.appendField(o[0].trim()),a.setAlign(s.a.ALIGN_RIGHT).connection.connect(e.outputConnection),"number"!=typeof o[o.length-1]&&this.appendDummyInput("_DUMMY_TAIL_"+t.name).appendField(o[o.length-1].trim()).setAlign(s.a.ALIGN_RIGHT)}else a.appendField(t.description).setAlign(s.a.ALIGN_RIGHT).connection.connect(e.outputConnection)}else if("Dummy"==t.type)this.appendDummyInput(t.name).appendField(t.message?t.message:t.description).setAlign(s.a.ALIGN_RIGHT);else throw"unsupported field type: "+t.type;this.getInput(t.name)&&(e.push(t.name),this.getInput("_DUMMY_TAIL_"+t.name)&&e.push("_DUMMY_TAIL_"+t.name))}for(let t=e.length-1;0<=t;--t)t==e.length-1?this.insertBefore_&&this.moveInputBefore(e[t],this.insertBefore_):this.moveInputBefore(e[t],e[t+1])}};s.a.Extensions.registerMutator(e.name,a,null,[])}a.d(t,"d",function(){return n}),a.d(t,"c",function(){return y}),a.d(t,"b",function(){return h}),a.d(t,"e",function(){return l}),a.d(t,"a",function(){return k});var i=a(0),s=a.n(i),r=a(27),d=a.n(r),c=a(28),u=a(10),p=a(12),m=a.n(p),_=new Set,b=new Map;document.addEventListener("keydown",function(t){_.add(m()(m()(t)))}),document.addEventListener("keyup",function(t){let e=m()(m()(t));_.delete(e),b.set(e,new Date().getTime())});var v=a(11);s.a.setLocale(c),s.a.Msg.CUSTOM_HUE=42,s.a.Msg.LISTS_GET_INDEX_TAIL="",s.a.Msg.LISTS_GET_SUBLIST_TAIL="",s.a.Msg.PROCEDURES_DEFNORETURN_DO="",s.a.Msg.TEXT_GET_SUBSTRING_TAIL="",s.a.Msg.LISTS_GET_INDEX_FROM_START="\u7B2C#",s.a.Msg.ORDINAL_NUMBER_SUFFIX="\u4E2A",s.a.Msg.TEXT_CHARAT_FROM_START="\u83B7\u53D6\u5B57\u7B26\u7B2C#",s.a.Msg.TEXT_CHARAT_FROM_END="\u83B7\u53D6\u5B57\u7B26\u5012\u6570\u7B2C#",s.a.Msg.TEXT_CHARAT_FIRST="\u5BFB\u627E\u7B2C\u4E00\u4E2A\u5B57\u7B26",s.a.Msg.TEXT_CHARAT_LAST="\u5BFB\u627E\u6700\u540E\u4E00\u4E2A\u5B57\u7B26",s.a.Msg.TEXT_CHARAT_RANDOM="\u5BFB\u627E\u968F\u673A\u7684\u5B57\u7B26",s.a.Msg.TEXT_LENGTH_TOOLTIP="\u8FD4\u56DE\u7ED9\u5B9A\u6587\u672C\u7684\u5B57\u7B26\u6570\uFF08\u5305\u62EC\u7A7A\u683C\uFF09\u3002",s.a.Msg.TEXT_CHARAT_TAIL="",s.a.Msg.PROCEDURES_DEFRETURN_TITLE="\u51FD\u6570\uFF1A",s.a.Msg.PROCEDURES_DEFNORETURN_TITLE="\u51FD\u6570\uFF1A",s.a.Msg.PROCEDURES_CALL_BEFORE_PARAMS="\u53D8\u91CF\uFF1A",s.a.Msg.PROCEDURES_BEFORE_PARAMS="\uFF0C\u53D8\u91CF\uFF1A",s.a.Msg.CONTROLS_FOR_TITLE="\u53D8\u91CF %1 \u4ECE %2 \u6570\u5230 %3 \u6BCF\u6B21\u53D8\u5316 %4",s.a.Msg.LISTS_GET_INDEX_RANDOM="\u968F\u673A\u4E00\u4E2A",s.a.Msg.LISTS_GET_SUBLIST_END_LAST="\u5230\u6700\u540E\u4E00\u4E2A",s.a.Msg.LISTS_GET_SUBLIST_END_FROM_START="\u5230\u7B2C#",s.a.Msg.LISTS_GET_SUBLIST_START_FROM_END="\u83B7\u53D6\u5B50\u5217\u8868\u4ECE\u5012\u6570\u7B2C#",s.a.Msg.LISTS_GET_SUBLIST_START_FROM_START="\u83B7\u53D6\u5B50\u5217\u8868\u4ECE\u7B2C#",s.a.Msg.TEXT_GET_SUBSTRING_START_FROM_END="\u53D6\u5F97\u5B50\u4E32\u81EA\u5B57\u7B26\u5012\u6570\u7B2C#",s.a.Msg.TEXT_GET_SUBSTRING_START_FROM_START="\u53D6\u5F97\u5B50\u4E32\u81EA\u5B57\u7B26\u7B2C#",s.a.Msg.TEXT_GET_SUBSTRING_END_FROM_END="\u5230\u5B57\u7B26\u5012\u6570\u7B2C#",s.a.Msg.TEXT_GET_SUBSTRING_END_FROM_START="\u5230\u5B57\u7B26\u7B2C#";var g=new Map;const y={INITIAL:1,PAUSED:2,RUNNING:3,STOPPED:4},h="blocklyEnvironment";class T{static init(){s.a.JavaScript.addReservedWords(h),s.a.defineBlocksWithJsonArray([{type:"custom_wait_seconds",message0:"\u7B49\u5F85 %1 \u79D2",args0:[{type:"input_value",name:"SECONDS",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_angle",message0:"%1",args0:[{type:"field_angle",name:"ANGLE"}],output:"Number",colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_is_key_down",inputsInline:!0,message0:"\u6309\u952E %1",args0:[{type:"field_dropdown",name:"KEY_CODE",options:[["\u21B5","13"],["\u7A7A\u683C","32"],["\u2190","37"],["\u2191","38"],["\u2192","39"],["\u2193","40"]]}],message1:"\u662F\u5426\u88AB\u6309\u4E0B %1",args1:[{type:"input_dummy",name:"INPUT_TAIL"}],output:"Boolean",mutator:"custom_is_key_down_mutator",colour:"%{BKY_CUSTOM_HUE}"}]),l({name:"custom_is_key_down_mutator",optionalFields:[{name:"SECONDS",description:"\u67E5\u770B\u6700\u8FD1\u7684\u4E00\u6BB5\u65F6\u95F4\u5185",message:"\u5728\u6700\u8FD1\u7684 %1 \u79D2\u5185",type:"Number",defaultValue:"1"}],insertBefore:"INPUT_TAIL"}),s.a.JavaScript.custom_wait_seconds=function(e){let t=s.a.JavaScript.valueToCode(e,"SECONDS",s.a.JavaScript.ORDER_NONE)||"0";return h+".waitForSeconds("+t+");\n"},s.a.JavaScript.custom_angle=function(e){let t=+e.getFieldValue("ANGLE"),a=0<=t?s.a.JavaScript.ORDER_ATOMIC:s.a.JavaScript.ORDER_UNARY_NEGATION;return[t,a]},s.a.JavaScript.custom_is_key_down=function(e){let t=s.a.JavaScript.valueToCode(e,"SECONDS",s.a.JavaScript.ORDER_COMMA)||"0";return[h+".isKeyDown("+e.getFieldValue("KEY_CODE")+", "+t+")",s.a.JavaScript.ORDER_MEMBER]}}constructor(e){this.options=e,this.cost=0,this.updateState(y.PAUSED),s.a.JavaScript.STATEMENT_PREFIX=h+".highlightBlock(%1);\n",s.a.JavaScript.STATEMENT_SUFFIX="",s.a.JavaScript.init(e.blocklyWorkspace),this.variables=s.a.Variables.allUsedVarModels(e.blocklyWorkspace),e.variableTable&&(0<e.variableTable.environmentVariables.length&&e.variableTable.environmentVariables.forEach((e,t)=>{s.a.JavaScript.STATEMENT_SUFFIX+=h+".logVariable("+t+", "+v.b.ENVIRONMENT+", "+e.symbol+");\n"}),this.variables.forEach((e,t)=>{s.a.JavaScript.STATEMENT_SUFFIX+=h+".logVariable("+t+", "+v.b.CUSTOM+", "+s.a.JavaScript.variableDB_.getName(e.name,s.a.VARIABLE_CATEGORY_NAME)+");\n"})),this.codes=s.a.JavaScript.workspaceToCode(e.blocklyWorkspace),this.interpreter=new d.a(this.codes,this.initApi.bind(this)),s.a.JavaScript.STATEMENT_PREFIX="",s.a.JavaScript.STATEMENT_SUFFIX=""}updateState(e){this.state=e,this.options.stateUpdateListener&&this.options.stateUpdateListener(e)}initApi(e,t){let a=e.createNativeFunction(function(e){return prompt(e)});e.setProperty(t,"prompt",a);let n=e.nativeToPseudo({});e.setProperty(t,h,n),a=e.createNativeFunction(function(e){e=(e||"")+"",this.options.blocklyWorkspace.highlightBlock(e),this.highlightPause=!0}.bind(this)),e.setProperty(n,"highlightBlock",a),a=e.createNativeFunction(function(e){this.cost+=e}.bind(this)),e.setProperty(n,"reportCost",a),a=e.createNativeFunction(function(e,t,a){this.options.variableTable&&this.options.variableTable.logVariable(e,t,a)}.bind(this)),e.setProperty(n,"logVariable",a),a=e.createAsyncFunction(function(e,t){setTimeout(t,1e3*e)}),e.setProperty(n,"waitForSeconds",a),a=e.createNativeFunction(function(e,t){return o(e,t)}.bind(this)),e.setProperty(n,"isKeyDown",a);for(let[a,o]of g){let t=e.nativeToPseudo({});e.setProperty(n,a,t),o(e,t)}}step(){this.state!=y.PAUSED||this.step_()}step_(){this.highlightPause=!1;do{try{if(!this.interpreter.step())return this.stop_(),this.options.blocklyWorkspace.highlightBlock(null),void this.log("\u7A0B\u5E8F\u8FD0\u884C\u6210\u529F\uFF01")}catch(t){return this.log(t),this.stop_(),void this.log("\u7A0B\u5E8F\u51FA\u9519\uFF01")}if(this.isWaitingForAsyncOperation())break}while(!this.highlightPause)}run(){if(this.state==y.PAUSED){this.updateState(y.RUNNING);let e={};this.runningContext=e,setTimeout(function(e){this.run_(e)}.bind(this,e),10)}}run_(e){for(let t=this.cost+this.options.runningOptions.costPerRound*(.5+Math.random());this.cost<t;++this.cost){if(this.runningContext!=e||this.state!=y.RUNNING)return;if(this.isWaitingForAsyncOperation())break;this.step_()}setTimeout(this.run_.bind(this,e),this.options.runningOptions.delay)}pause(){this.state!=y.RUNNING||this.updateState(y.PAUSED)}stop(){this.state==y.STOPPED||(this.stop_(),this.log("\u7A0B\u5E8F\u7EC8\u6B62\uFF01"))}stop_(){this.updateState(y.STOPPED)}log(e){this.options.logListener&&this.options.logListener(e)}isWaitingForAsyncOperation(){return this.interpreter.paused_}setRunningOptions(e){this.options.runningOptions=e}}T.init();class k{constructor(e){this.options=e,this.blocklyWorkspace=s.a.inject(e.blocklyId,{toolbox:e.toolbox,readOnly:e.readOnly,zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},move:{scrollbars:!0,drag:!0,wheel:!1},media:u.join(a.p,"blockly_media/"),trashcan:!0}),this.blocklyWorkspace.addChangeListener(function(e){e instanceof s.a.Events.Ui||this.interpreter&&(this.interpreter.log("\u4EE3\u7801\u88AB\u4FEE\u6539\uFF0C\u7A0B\u5E8F\u5373\u5C06\u88AB\u7EC8\u6B62\uFF01"),this.interpreter.stop())}.bind(this))}reset(){this.blocklyWorkspace.clear()}step(){this.handleNewExecution_(),this.interpreter.step()}pause(){this.interpreter&&this.interpreter.pause()}run(e){this.handleNewExecution_(),this.interpreter.run(e)}stop(){this.interpreter&&this.interpreter.stop()}setRunningOptions(e){this.options.runningOptions=e,this.interpreter&&this.interpreter.setRunningOptions(e)}generateJavaScript(){let e=new T({blocklyWorkspace:this.blocklyWorkspace});return e.codes}handleNewExecution_(){this.interpreter||(this.options.stateUpdateListener&&this.options.stateUpdateListener(y.INITIAL),this.interpreter=new T({blocklyWorkspace:this.blocklyWorkspace,logListener:function(e){this.options.logArea?(this.options.logArea.innerText+=e+"\n",this.options.logArea.scrollIntoView(!1)):console.log("Log: ",e)}.bind(this),variableTable:this.options.variableTable,stateUpdateListener:function(e){e==y.STOPPED&&(this.interpreter=null),this.options.stateUpdateListener&&this.options.stateUpdateListener(e)}.bind(this),runningOptions:this.options.runningOptions}),this.options.logArea&&(this.options.logArea.textContent=""),this.options.variableTable&&this.options.variableTable.init(this.interpreter.variables))}}},31:function(e,t,a){"use strict";a.r(t),t["default"]=a.p+"images/file-loader-logo-bbb0394a2cd395948e9f69e10ac316c8.svg"},32:function(e,t,a){var o=a(14),n=a(33);n=n.__esModule?n.default:n,"string"==typeof n&&(n=[[e.i,n,""]]);o(n,{insert:"head",singleton:!1});e.exports=n.locals||{}},33:function(e,t,a){var o=a(15);t=o(!1),t.push([e.i,".navbar {\n  background-color: LightGrey;\n  height: 30px;\n  font-size: 16px;\n}\n#logo {\n  vertical-align: middle;\n  height: 30px;\n  margin-top: -4px;\n  margin-left: 8px;\n  margin-right: 8px;\n}\n.navbar .subnav {\n  display: inline-block;\n}\n.navbar .navbtn,\n.navbar .subnavbtn {\n  padding: 4px 8px;\n  cursor: pointer;\n}\n.navbar .navbtn:hover,\n.navbar .subnavbtn:hover {\n  background-color: Grey;\n}\n.subnav-content {\n  display: none;\n  position: absolute;\n  background-color: LightGrey;\n  border: 1px solid Grey;\n  z-index: 100;\n}\n.navbar .subnav:hover .subnav-content {\n  display: block;\n}\n.navbar .selected::after {\n  content: \"\u2713\";\n}\n.buttonsContainer {\n  float: right;\n  display: flex;\n}\n.buttonsContainer button {\n  align-items: center;\n  display: inline-flex;\n  padding: 0px 6px;\n  margin: 0px 3px;\n}\n.main {\n  display: flex;\n  width: 100%;\n  height: calc(99.5vh - 30px);\n  margin-top: 0.5vh;\n  overflow: hidden;\n}\n#blocklyWorkspaceContainer,\n#blocklyConsole {\n  width: calc(50% - 5px);\n}\n#blocklyWorkspace {\n  width: 100%;\n  height: 100%;\n}\n#blocklyConsole {\n  font-family: monospace;\n}\n#blocklyOutput {\n  height: calc(80% - 5px);\n}\n#blocklyDevloperTools {\n  height: calc(20% - 5px);\n  background-color: LightGrey;\n  overflow: hidden;\n}\n#blocklyLogArea {\n  padding: 0.5vw;\n  white-space: pre;\n}\n.js-tabs__nav {\n  position: relative;\n  height: 20px;\n}\n.js-tabs__tabs-container {\n  margin: 0;\n  padding: 0;\n}\n.js-tabs__tab {\n  display: inline-block;\n  text-align: center;\n  padding: 0 12px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n  cursor: pointer;\n}\n.js-tabs__no-marker > .js-tabs__tab {\n  border-bottom: none;\n}\n.js-tabs__marker {\n  position: absolute;\n  bottom: 0;\n  height: 3px;\n  transition: transform 0.5s, width 0.5s, background-color 0.5s;\n}\n.js-tabs__content-container {\n  margin: 0;\n  padding: 0;\n  height: calc(100% - 20px);\n  overflow: scroll;\n}\n.js-tabs__content {\n  display: none;\n}\n.js-tabs__content.active {\n  display: block;\n}\n.gutter {\n  background-color: #eee;\n  background-repeat: no-repeat;\n  background-position: 50%;\n}\n.gutter.gutter-horizontal {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==\");\n}\n.gutter.gutter-vertical {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=\");\n}\n#helpDialog {\n  display: none;\n  flex-direction: column;\n  position: fixed;\n  z-index: 200;\n  top: calc(50% - 200px);\n  left: calc(50% - 200px);\n  width: 400px;\n  resize: both;\n  overflow: hidden;\n  min-height: 60px;\n  min-width: 200px;\n}\n#helpDialogDragHandle {\n  color: white;\n  height: 24px;\n  padding-left: 8px;\n  background-color: blue;\n  cursor: move;\n}\n#helpDialogShowDemoButton {\n  visibility: hidden;\n  color: yellow;\n  cursor: pointer;\n}\n#helpDialogCloseButton {\n  float: right;\n  cursor: pointer;\n}\n#helpDialogContents {\n  padding: 8px;\n  background-color: pink;\n  height: calc(100% - 24px);\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n",""]),e.exports=t},34:function(e,t,a){var o=a(14),n=a(35);n=n.__esModule?n.default:n,"string"==typeof n&&(n=[[e.i,n,""]]);o(n,{insert:"head",singleton:!1});e.exports=n.locals||{}},35:function(e,t,a){var o=a(15);t=o(!1),t.push([e.i,"#blocklyVariableTable {\n  padding: 0.5vw;\n  font-size: 13px;\n}\n#blocklyVariableTable .variableName {\n  background-color: white;\n  margin-right: 10px;\n  white-space: pre;\n}\n#varialeTableSelectedVariables .material-icons {\n  font-size: 13px;\n}\n#varialeTableSelectedVariables .unselectVariable {\n  cursor: pointer;\n}\n",""]),e.exports=t},42:function(e,t,a){var o=a(14),n=a(43);n=n.__esModule?n.default:n,"string"==typeof n&&(n=[[e.i,n,""]]);o(n,{insert:"head",singleton:!1});e.exports=n.locals||{}},43:function(e,t,a){var o=a(15);t=o(!1),t.push([e.i,"#pixiOutput {\n  width: 100%;\n  height: 100%;\n}\n#pixiContainer {\n  border: 1px solid;\n}\n#pixiCanvas {\n  position: absolute;\n  z-index: -1;\n}\n",""]),e.exports=t},44:function(e,t,a){var o=a(14),n=a(45);n=n.__esModule?n.default:n,"string"==typeof n&&(n=[[e.i,n,""]]);o(n,{insert:"head",singleton:!1});e.exports=n.locals||{}},45:function(e,t,a){var o=a(15);t=o(!1),t.push([e.i,"#imageCollections {\n  display: inline-flex;\n  flex-wrap: wrap;\n}\n\n#imageCollections .container {\n  width: 82px;\n  height: 82px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  margin: 4px;\n  border: 1px solid;\n}\n\n#imageCollections .container img {\n  max-width: 100%;\n  max-height: 100%;\n}\n\n#imageCollections .removeButton {\n  position: relative;\n  background: grey;\n  top: -86px;\n  left: 62px;\n  display: block;\n  width: 24px;\n  cursor: pointer;\n}\n\n#uploadImageButton {\n  cursor: pointer;\n}\n",""]),e.exports=t},65:function(e,t,a){var o=a(41),n=a(159),l=a(160),i=o(n),s=o(l);e.exports="\u505A\u4E00\u4E2A\u4E94\u661F\u7EA2\u65D7\u9AD8\u9AD8\u5347\u8D77\u7684\u52A8\u753B <br/> <img style=width:200px src="+i+" /> <img style=width:200px src="+s+" /> "},7:function(e,t,a){"use strict";function o(e){return new Promise((t,a)=>{let o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=a,o.readAsDataURL(e)})}async function n(e){let t={xmlCodes:new XMLSerializer().serializeToString(e),blobs:[]};for(let a of d){let e=r.get(a);t.blobs.push({url:a,blob:e.blob,tag:e.tag,payload:e.payload})}for(let a of t.blobs)a.blobDataUrl=await o(a.blob),delete a.blob;return JSON.stringify(t)}async function l(e){return await s(JSON.parse(e))}async function i(e){p=e}async function s(e){for(let[t,a]of r){let e=c.get(a.tag);if(!e)throw"BlobManager not found: "+tag;e.blobRemoveListener_&&e.blobRemoveListener_(t,a.payload),URL.revokeObjectURL(t)}d=[],r.clear();let t=new DOMParser().parseFromString(e.xmlCodes,"application/xml").documentElement,a=new Map;if(t.hasChildNodes()){let e=t.childNodes,a=[];for(let t of e)"shadow"==t.nodeName&&(console.log("Remove top level shadow dom:"),console.log(t),a.push(t));for(let e of a)t.removeChild(e)}for(let t of e.blobs){let e=await(await fetch(t.blobDataUrl)).blob(),o=c.get(t.tag).createBlob(e,t.payload);a.set(t.url,o)}let o=t.getElementsByTagName("field");for(let t of o)if(t.attributes&&t.attributes.name&&"BLOB_URL"==t.attributes.name.value){let e=a.get(t.textContent);e&&(t.textContent=e)}return t}a.d(t,"a",function(){return u}),a.d(t,"e",function(){return n}),a.d(t,"c",function(){return l}),a.d(t,"d",function(){return i}),a.d(t,"b",function(){return s});var r=new Map,d=[],c=new Map;class u{constructor(e,t){return c.has(e)?void console.log("Blob Manager tag is already used: "+e):void(this.tag_=e,this.blobAddListener_=t.blobAddListener,this.blobRemoveListener_=t.blobRemoveListener,c.set(e,this))}getBlobUrls(){let e=[];for(let[t,a]of r)a.tag==this.tag_&&e.push(t);return e}createBlob(e,t){let a=URL.createObjectURL(e);return d.push(a),r.set(a,{blob:e,payload:t,tag:this.tag_}),this.blobAddListener_&&this.blobAddListener_(a,t),a}removeBlob(e){if(p&&p(e))return void alert("\u8BE5\u8D44\u6E90\u6B63\u5728\u88AB\u4F7F\u7528\uFF0C\u65E0\u6CD5\u5220\u9664\uFF01");let t=r.get(e);return t?void(this.blobRemoveListener_&&this.blobRemoveListener_(e,t.payload),d=d.filter((t)=>t!=e),r.delete(e),URL.revokeObjectURL(e)):void console.log("Blob URL does not exist: "+e)}}var p},9:function(e,t,a){"use strict";function o(e){if(!i.test(e))throw"\u8FD9\u4E0D\u662F\u989C\u8272\uFF1A"+e}function n(e){return parseInt("0x"+e.substring(1))}function l(e){return e%=360,0>e&&(e+=360),e}a.d(t,"c",function(){return o}),a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l});const i=/^#[0-9a-fA-F]{6}$/}});