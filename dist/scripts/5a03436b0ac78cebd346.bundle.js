(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{203:function(e,t,n){var a=n(22),o=n(204);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var l={insert:"head",singleton:!1};a(o,l);e.exports=o.locals||{}},204:function(e,t,n){(t=n(23)(!1)).push([e.i,"#imageCollections {\n  display: inline-flex;\n  flex-wrap: wrap;\n}\n\n#imageCollections .container {\n  width: 82px;\n  height: 82px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  margin: 4px;\n  border: 1px solid;\n}\n\n#imageCollections .container img {\n  max-width: 100%;\n  max-height: 100%;\n}\n\n#imageCollections .removeButton {\n  background: grey;\n  margin-top: -84px;\n  margin-left: 60px;\n  margin-bottom: 57px;\n  display: block;\n  width: 24px;\n  cursor: pointer;\n  opacity: 0.8;\n}\n\n#imageCollections .sizeInfo {\n  margin-left: 6px;\n  margin-right: 6px;\n  margin-top: -24px;\n  margin-bottom: 6px;\n  min-width: 18px;\n  height: 18px;\n  text-align: center;\n  color: white;\n  background-color: grey;\n  opacity: 0.8;\n}\n\n#uploadImageButton {\n  cursor: pointer;\n}\n",""]),e.exports=t},205:function(e,t,n){var a=n(22),o=n(206);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var l={insert:"head",singleton:!1};a(o,l);e.exports=o.locals||{}},206:function(e,t,n){(t=n(23)(!1)).push([e.i,"#pixiOutput{width:100%;height:100%}#pixiContainer{border:1px solid}#pixiCanvas{position:absolute;z-index:-1}#contextMenu .mdc-list-item{height:auto;font-size:14px}",""]),e.exports=t},25:function(e,t,n){"use strict";t.a='<xml xmlns="https://developers.google.com/blockly/xml">\n  <category name="乌龟" colour="%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}">\n    <block type="custom_turtle_environment_move">\n      <value name="DISTANCE">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_move_to_coordinate">\n      <value name="X">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n      <value name="Y">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_get_coordinate">\n    </block>\n    <block type="custom_turtle_environment_turn">\n      <value name="ANGLE">\n        <shadow type="custom_angle">\n          <field name="ANGLE">90</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_turn_to_angle">\n      <value name="ANGLE">\n        <shadow type="custom_angle">\n          <field name="ANGLE">90</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_get_angle">\n    </block>\n  </category>\n  <category name="画笔" colour="%{BKY_CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE}">\n    <block type="custom_turtle_environment_set_pen">\n    </block>\n    <block type="custom_turtle_environment_set_pen_color">\n      <value name="COLOUR">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#000000</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_set_pen_width">\n      <value name="WIDTH">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_fill">\n      <value name="COLOUR">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#000000</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <category name="喷漆" colour="%{BKY_CUSTOM_TURTLE_ENVIRONMENT_DRAW_HUE}">\n    <block type="custom_turtle_environment_draw_shape">\n      <value name="COLOUR">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#000000</field>\n        </shadow>\n      </value>\n      <value name="WIDTH">\n        <shadow type="math_number">\n          <field name="NUM">100</field>\n        </shadow>\n      </value>\n      <value name="HEIGHT">\n        <shadow type="math_number">\n          <field name="NUM">50</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_draw_text">\n      <value name="TEXT">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n      <value name="COLOUR">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#000000</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_turtle_environment_draw_image">\n    </block>\n  </category>\n  <category name="输入" colour="%{BKY_CUSTOM_INPUT_HUE}">\n    <block type="custom_is_key_down">\n    </block>\n    <block type="custom_turtle_environment_get_mouse_coordinate">\n    </block>\n    <block type="custom_turtle_environment_is_mouse_key_down">\n    </block>\n    <block type="custom_input">\n      <value name="HINT">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_select">\n      <value name="TITLE">\n        <shadow type="text">\n          <field name="TEXT">请选择</field>\n        </shadow>\n      </value>\n      <value name="OPTIONS">\n        <block type="lists_create_with">\n          <mutation items="2"></mutation>\n          <value name="ADD0">\n            <block type="text">\n              <field name="TEXT">选项1</field>\n            </block>\n          </value>\n          <value name="ADD1">\n            <block type="text">\n              <field name="TEXT">选项2</field>\n            </block>\n          </value>\n        </block>\n      </value>\n    </block>\n  </category>\n  <category name="其他" colour="%{BKY_CUSTOM_HUE}">\n    <block type="custom_turtle_environment_set_visibility">\n    </block>\n    <block type="custom_turtle_environment_set_mouse_visibility">\n    </block>\n    <block type="custom_turtle_environment_clear_canvas">\n    </block>\n    <block type="custom_wait_seconds">\n      <value name="SECONDS">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="custom_breakpoint">\n    </block>\n  </category>\n  <sep></sep>\n  <category name="逻辑" colour="%{BKY_LOGIC_HUE}">\n    <block type="controls_if"></block>\n    <block type="logic_compare"></block>\n    <block type="logic_operation"></block>\n    <block type="logic_negate"></block>\n    <block type="logic_boolean"></block>\n    <block type="logic_null"></block>\n    <block type="logic_ternary"></block>\n  </category>\n  <category name="循环" colour="%{BKY_LOOPS_HUE}">\n    <block type="controls_repeat_ext">\n      <value name="TIMES">\n        <shadow type="math_number">\n          <field name="NUM">10</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="controls_whileUntil"></block>\n    <block type="controls_for">\n      <value name="FROM">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n      <value name="TO">\n        <shadow type="math_number">\n          <field name="NUM">10</field>\n        </shadow>\n      </value>\n      <value name="BY">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="controls_forEach"></block>\n    <block type="controls_flow_statements"></block>\n  </category>\n  <category name="数学" colour="%{BKY_MATH_HUE}">\n    <block type="math_number">\n      <field name="NUM">123</field>\n    </block>\n    <block type="math_arithmetic">\n      <value name="A">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n      <value name="B">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_single">\n      <value name="NUM">\n        <shadow type="math_number">\n          <field name="NUM">9</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_trig">\n      <value name="NUM">\n        <shadow type="math_number">\n          <field name="NUM">45</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_constant"></block>\n    <block type="math_number_property">\n      <value name="NUMBER_TO_CHECK">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_round">\n      <value name="NUM">\n        <shadow type="math_number">\n          <field name="NUM">3.1</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_on_list"></block>\n    <block type="math_modulo">\n      <value name="DIVIDEND">\n        <shadow type="math_number">\n          <field name="NUM">64</field>\n        </shadow>\n      </value>\n      <value name="DIVISOR">\n        <shadow type="math_number">\n          <field name="NUM">10</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_constrain">\n      <value name="VALUE">\n        <shadow type="math_number">\n          <field name="NUM">50</field>\n        </shadow>\n      </value>\n      <value name="LOW">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n      <value name="HIGH">\n        <shadow type="math_number">\n          <field name="NUM">100</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_random_int">\n      <value name="FROM">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n      <value name="TO">\n        <shadow type="math_number">\n          <field name="NUM">100</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="math_random_float"></block>\n    <block type="math_atan2">\n      <value name="X">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n      <value name="Y">\n        <shadow type="math_number">\n          <field name="NUM">1</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <category name="文本" colour="%{BKY_TEXTS_HUE}">\n    <block type="text"></block>\n    <block type="text_join"></block>\n    <block type="text_append">\n      <value name="TEXT">\n        <shadow type="text"></shadow>\n      </value>\n    </block>\n    <block type="text_length">\n      <value name="VALUE">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="text_isEmpty">\n      <value name="VALUE">\n        <shadow type="text">\n          <field name="TEXT"></field>\n        </shadow>\n      </value>\n    </block>\n    <block type="text_indexOf">\n      <value name="VALUE">\n        <block type="variables_get">\n          <field name="VAR">文本</field>\n        </block>\n      </value>\n      <value name="FIND">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="text_charAt">\n      <value name="VALUE">\n        <block type="variables_get">\n          <field name="VAR">文本</field>\n        </block>\n      </value>\n    </block>\n    <block type="text_getSubstring">\n      <value name="STRING">\n        <block type="variables_get">\n          <field name="VAR">文本</field>\n        </block>\n      </value>\n    </block>\n    <block type="text_changeCase">\n      <value name="TEXT">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="text_trim">\n      <value name="TEXT">\n        <shadow type="text">\n          <field name="TEXT">abc</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <category name="列表" colour="%{BKY_LISTS_HUE}">\n    <block type="lists_create_with">\n      <mutation items="0"></mutation>\n    </block>\n    <block type="lists_create_with"></block>\n    <block type="lists_repeat">\n      <value name="NUM">\n        <shadow type="math_number">\n          <field name="NUM">5</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="lists_length"></block>\n    <block type="lists_isEmpty"></block>\n    <block type="lists_indexOf">\n      <value name="VALUE">\n        <block type="variables_get">\n          <field name="VAR">列表</field>\n        </block>\n      </value>\n    </block>\n    <block type="lists_getIndex">\n      <value name="VALUE">\n        <block type="variables_get">\n          <field name="VAR">列表</field>\n        </block>\n      </value>\n    </block>\n    <block type="lists_setIndex">\n      <value name="LIST">\n        <block type="variables_get">\n          <field name="VAR">列表</field>\n        </block>\n      </value>\n    </block>\n    <block type="lists_getSublist">\n      <value name="LIST">\n        <block type="variables_get">\n          <field name="VAR">列表</field>\n        </block>\n      </value>\n    </block>\n    <block type="lists_split">\n      <value name="DELIM">\n        <shadow type="text">\n          <field name="TEXT">,</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="lists_sort"></block>\n  </category>\n  <category name="颜色" colour="%{BKY_COLOUR_HUE}">\n    <block type="colour_picker"></block>\n    <block type="colour_random"></block>\n    <block type="colour_rgb">\n      <value name="RED">\n        <shadow type="math_number">\n          <field name="NUM">100</field>\n        </shadow>\n      </value>\n      <value name="GREEN">\n        <shadow type="math_number">\n          <field name="NUM">50</field>\n        </shadow>\n      </value>\n      <value name="BLUE">\n        <shadow type="math_number">\n          <field name="NUM">0</field>\n        </shadow>\n      </value>\n    </block>\n    <block type="colour_blend">\n      <value name="COLOUR1">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#ff0000</field>\n        </shadow>\n      </value>\n      <value name="COLOUR2">\n        <shadow type="colour_picker">\n          <field name="COLOUR">#3333ff</field>\n        </shadow>\n      </value>\n      <value name="RATIO">\n        <shadow type="math_number">\n          <field name="NUM">0.5</field>\n        </shadow>\n      </value>\n    </block>\n  </category>\n  <sep></sep>\n  <category name="变量" colour="%{BKY_VARIABLES_HUE}" custom="VARIABLE"></category>\n  <category name="函数" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category>\n</xml>\n'},37:function(e,t,n){"use strict";t.a=n.p+"images/file-loader-9fe1139ce2a9a69e6f42ae91c5a941d1.svg"},75:function(e,t){e.exports='<div id=pixiOutput> <canvas id=pixiCanvas></canvas> <div id=pixiContainer></div> </div> <div id=contextMenu class="mdc-menu mdc-menu-surface"> <ul class=mdc-list role=menu aria-hidden=true aria-orientation=vertical tabindex=-1> <li class=mdc-list-item role=menuitem> <span class=mdc-list-item__ripple></span> <span class=mdc-list-item__text>截取当前画面（标准大小400✕400）</span> </li> <li class=mdc-list-item role=menuitem> <span class=mdc-list-item__ripple></span> <span class=mdc-list-item__text>截取当前画面（高清大图2000✕2000）</span> </li> </ul> </div> '},80:function(e,t){e.exports="<div class=container id=uploadImageButton> <i class=material-icons style=font-size:48px>add</i> </div> "},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var a,o,l,i,r=n(19),u=(n(25),n(75)),c=n.n(u),s=n(0),m=n.n(s),d=n(14),_=n(6),p=n(78),v=n(12),h=n(79),y=(n(203),n(80)),f=n.n(y),g=n(26),b=new Map;const E=new g.a("image",{blobAddListener:function(e,t){let n=document.createElement("div"),a=document.createElement("div");a.classList.add("container");let r=document.createElement("img");a.appendChild(r),n.appendChild(a);let u=document.createElement("div");if(u.classList.add("sizeInfo"),n.appendChild(u),i.ignoreUnremovable&&(t.unremovable=null),!t.unremovable){let t=document.createElement("div");t.classList.add("removeButton"),t.innerHTML='<i class="material-icons">delete</i>',t.onclick=function(){this.removeBlob(e)}.bind(this),n.appendChild(t)}r.onload=function(e,t){t.innerText=e.naturalWidth+"✕"+e.naturalHeight}.bind(void 0,r,u),r.src=e,b.set(e,new d.i(d.b.from(e))),o.insertBefore(n,l)},blobRemoveListener:function(e,t){let n=o.children;if(!n)return;for(let t of n)if("uploadImageButton"!=t.id&&t.children[0].children[0].src==e)return void o.removeChild(t);let a=b.get(e,new d.i(d.b.from(e)));a&&(a.destroy(),blobUrlToTexture.delete(e))}});function T(){return E.getBlobUrls()}var w=n(33),N=n(271),k=(n(205),n(37));m.a.Msg.CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE=235,m.a.Msg.CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE=185,m.a.Msg.CUSTOM_TURTLE_ENVIRONMENT_DRAW_HUE=70,m.a.defineBlocksWithJsonArray([{type:"custom_turtle_environment_move",message0:"%1 %2",args0:[{type:"field_dropdown",name:"DIRECTION",options:[["前进指定距离","moveForward"],["后退指定距离","moveBackward"]]},{type:"input_value",name:"DISTANCE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"让乌龟向前或向后移动指定的距离。"},{type:"custom_turtle_environment_move_to_coordinate",message0:"平移到坐标( %1 , %2 )",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"让乌龟移动到指定的坐标。"},{type:"custom_turtle_environment_get_coordinate",message0:"获取当前位置的 %1",args0:[{type:"field_dropdown",name:"AXIS",options:[["横坐标","getCoordinateX"],["纵坐标","getCoordinateY"]]}],output:"Number",colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"获取乌龟当前位置的横坐标或纵坐标。"},{type:"custom_turtle_environment_turn",message0:"%1 %2",args0:[{type:"field_dropdown",name:"DIRECTION",options:[["左转↺","turnLeft"],["右转↻","turnRight"]]},{type:"input_value",name:"ANGLE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"让乌龟向左或向右转动指定的角度。"},{type:"custom_turtle_environment_turn_to_angle",message0:"改变当前方向 %1",args0:[{type:"input_value",name:"ANGLE",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"改变乌龟的方向。（向上为90，向下为270，向左为180，向右为0）"},{type:"custom_turtle_environment_get_angle",message0:"获取当前方向",output:"Number",colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_MOVE_HUE}",tooltip:"获取乌龟当前的方向。（返回值大于等于0小于360，其中向上为90，向下为270，向左为180，向右为0）"},{type:"custom_turtle_environment_set_pen",message0:"%1",args0:[{type:"field_dropdown",name:"PEN",options:[["提起笔","penUp"],["落下笔","penDown"]]}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE}",tooltip:"提起或落下笔，来停下或开始绘画。"},{type:"custom_turtle_environment_set_visibility",message0:"%1",args0:[{type:"field_dropdown",name:"VISIBILITY",options:[["隐藏乌龟","hide"],["显示乌龟","show"]]}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_mouse_visibility",message0:"%1",args0:[{type:"field_dropdown",name:"VISIBILITY",options:[["隐藏鼠标","hideMouse"],["显示鼠标","showMouse"]]}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"},{type:"custom_turtle_environment_set_pen_color",message0:"将笔的颜色设置为 %1",args0:[{type:"input_value",name:"COLOUR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE}"},{type:"custom_turtle_environment_set_pen_width",message0:"将笔的粗细设置为 %1",args0:[{type:"input_value",name:"WIDTH",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE}"},{type:"custom_turtle_environment_fill",message0:"将围住的区域填充为 %1",args0:[{type:"input_value",name:"COLOUR",check:"Colour"}],message1:"%1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_PEN_HUE}",tooltip:"将移动轨迹围成的区域填充为指定颜色。"},{type:"custom_turtle_environment_draw_shape",message0:"画 %1",args0:[{type:"field_dropdown",name:"SHAPE",options:[["椭圆","drawEllipse"],["矩形","drawRectangle"]]}],message1:"颜色 %1",args1:[{type:"input_value",name:"COLOUR",check:"Colour",align:"RIGHT"}],message2:"宽度 %1",args2:[{type:"input_value",name:"WIDTH",check:"Number",align:"RIGHT"}],message3:"高度 %1",args3:[{type:"input_value",name:"HEIGHT",check:"Number",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_DRAW_HUE}",tooltip:"根据乌龟当前的位置和方向，画指定图形。"},{type:"custom_turtle_environment_draw_text",message0:"画文本 %1",args0:[{type:"input_value",name:"TEXT",align:"RIGHT"}],message1:"颜色 %1",args1:[{type:"input_value",name:"COLOUR",check:"Colour",align:"RIGHT"}],previousStatement:null,nextStatement:null,mutator:"custom_turtle_environment_draw_text_mutator",colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_DRAW_HUE}",tooltip:"根据乌龟当前的位置和方向，画指定文字。"},{type:"custom_turtle_environment_draw_image",message0:"画图片 %1",args0:[{type:"input_dummy",name:"INPUT",align:"RIGHT"}],previousStatement:null,nextStatement:null,inputsInline:!1,mutator:"custom_turtle_environment_draw_image_mutator",colour:"%{BKY_CUSTOM_TURTLE_ENVIRONMENT_DRAW_HUE}",extensions:["custom_turtle_environment_draw_image_extension"],tooltip:"根据乌龟当前的位置和方向，画指定图片。"},{type:"custom_turtle_environment_get_mouse_coordinate",message0:"获取鼠标 %1 的 %2",args0:[{type:"field_dropdown",name:"SITUATION",options:[["当前位置","CURRENT"],["上一次按下左键时","LAST_LEFT_DOWN"],["上一次按下右键时","LAST_RIGHT_DOWN"]]},{type:"field_dropdown",name:"AXIS",options:[["横坐标","X"],["纵坐标","Y"]]}],output:"Number",colour:"%{BKY_CUSTOM_INPUT_HUE}"},{type:"custom_turtle_environment_is_mouse_key_down",inputsInline:!0,message0:"%1",args0:[{type:"field_dropdown",name:"BUTTON",options:[["鼠标左键","LEFT"],["鼠标右键","RIGHT"]]}],message1:"是否被按下 %1",args1:[{type:"input_dummy",name:"INPUT_TAIL"}],output:"Boolean",mutator:"custom_turtle_environment_is_mouse_key_down_mutator",colour:"%{BKY_CUSTOM_INPUT_HUE}"},{type:"custom_turtle_environment_clear_canvas",message0:"清空画布",previousStatement:null,nextStatement:null,colour:"%{BKY_CUSTOM_HUE}"}]),_.f({name:"custom_turtle_environment_draw_text_mutator",optionalFields:[{name:"FONT_SIZE",description:"字体大小",type:"Number",defaultValue:"20"},{name:"STROKE_THICKNESS",description:"描边粗细",type:"Number",defaultValue:0},{name:"STROKE_COLOUR",description:"描边颜色",type:"Colour",defaultValue:"#ffffff"},{name:"SCALE_X",description:"水平缩放",type:"Number",defaultValue:"1"},{name:"SCALE_Y",description:"垂直缩放",type:"Number",defaultValue:"1"}]}),_.f({name:"custom_turtle_environment_draw_image_mutator",optionalFields:[{name:"NEXT",description:"画之后的图片",message:"之后的第 %1 张图",type:"Number",defaultValue:"0"},{name:"SCALE_X",description:"水平缩放",type:"Number",defaultValue:"1"},{name:"SCALE_Y",description:"垂直缩放",type:"Number",defaultValue:"1"},{name:"OPACITY",description:"透明度",type:"Number",defaultValue:"1"},{name:"TINT",description:"染色",type:"Colour",defaultValue:"#ffffff"}]}),m.a.Extensions.register("custom_turtle_environment_draw_image_extension",(function(){this.getInput("INPUT").appendField(new m.a.FieldDropdown((function(){let e=T(),t=[];for(let n of e)t.push([{src:n,width:50,height:50},n]);return t.length||t.push(["",""]),t})),"BLOB_URL")})),_.f({name:"custom_turtle_environment_is_mouse_key_down_mutator",optionalFields:[{name:"SECONDS",description:"查看最近的一段时间内",message:"在最近的 %1 秒内",type:"Number",defaultValue:"1"}],insertBefore:"INPUT_TAIL"}),m.a.JavaScript.custom_turtle_environment_move=function(e){let t=m.a.JavaScript.valueToCode(e,"DISTANCE",m.a.JavaScript.ORDER_NONE)||"0";return _.b+".turtleEnvironment."+e.getFieldValue("DIRECTION")+"("+t+");\n"},m.a.JavaScript.custom_turtle_environment_move_to_coordinate=function(e){let t=m.a.JavaScript.valueToCode(e,"X",m.a.JavaScript.ORDER_COMMA)||"0",n=m.a.JavaScript.valueToCode(e,"Y",m.a.JavaScript.ORDER_COMMA)||"0";return _.b+".turtleEnvironment.moveToCoordinate("+t+", "+n+");\n"},m.a.JavaScript.custom_turtle_environment_get_coordinate=function(e){return[_.b+".turtleEnvironment."+e.getFieldValue("AXIS")+"()",m.a.JavaScript.ORDER_MEMBER]},m.a.JavaScript.custom_turtle_environment_turn=function(e){let t=m.a.JavaScript.valueToCode(e,"ANGLE",m.a.JavaScript.ORDER_NONE)||"0";return _.b+".turtleEnvironment."+e.getFieldValue("DIRECTION")+"("+t+");\n"},m.a.JavaScript.custom_turtle_environment_turn_to_angle=function(e){let t=m.a.JavaScript.valueToCode(e,"ANGLE",m.a.JavaScript.ORDER_NONE)||"90";return _.b+".turtleEnvironment.turnToAngle("+t+");\n"},m.a.JavaScript.custom_turtle_environment_get_angle=function(e){return[_.b+".turtleEnvironment.getAngle()",m.a.JavaScript.ORDER_MEMBER]},m.a.JavaScript.custom_turtle_environment_set_pen=function(e){return _.b+".turtleEnvironment."+e.getFieldValue("PEN")+"();\n"},m.a.JavaScript.custom_turtle_environment_set_visibility=function(e){return _.b+".turtleEnvironment."+e.getFieldValue("VISIBILITY")+"();\n"},m.a.JavaScript.custom_turtle_environment_set_mouse_visibility=function(e){return _.b+".turtleEnvironment."+e.getFieldValue("VISIBILITY")+"();\n"},m.a.JavaScript.custom_turtle_environment_set_pen_color=function(e){let t=m.a.JavaScript.valueToCode(e,"COLOUR",m.a.JavaScript.ORDER_NONE)||'"#000000"';return _.b+".turtleEnvironment.setPenColor("+t+");\n"},m.a.JavaScript.custom_turtle_environment_set_pen_width=function(e){let t=m.a.JavaScript.valueToCode(e,"WIDTH",m.a.JavaScript.ORDER_NONE)||"0";return _.b+".turtleEnvironment.setPenWidth("+t+");\n"},m.a.JavaScript.custom_turtle_environment_fill=function(e){let t=m.a.JavaScript.valueToCode(e,"COLOUR",m.a.JavaScript.ORDER_NONE)||'"#000000"',n=m.a.JavaScript.statementToCode(e,"DO"),a=_.b+".turtleEnvironment.prepareFill("+t+");\n{\n"+n+"}\n";return m.a.JavaScript.STATEMENT_PREFIX&&(a+=m.a.JavaScript.injectId(m.a.JavaScript.STATEMENT_PREFIX,e)),a+_.b+".turtleEnvironment.finishFill();\n"},m.a.JavaScript.custom_turtle_environment_draw_shape=function(e){let t=m.a.JavaScript.valueToCode(e,"COLOUR",m.a.JavaScript.ORDER_COMMA)||'"#000000"',n=m.a.JavaScript.valueToCode(e,"WIDTH",m.a.JavaScript.ORDER_COMMA)||"0",a=m.a.JavaScript.valueToCode(e,"HEIGHT",m.a.JavaScript.ORDER_COMMA)||"0";return _.b+".turtleEnvironment."+e.getFieldValue("SHAPE")+"("+t+", "+n+", "+a+");\n"},m.a.JavaScript.custom_turtle_environment_draw_text=function(e){let t=m.a.JavaScript.valueToCode(e,"TEXT",m.a.JavaScript.ORDER_COMMA)||"",n=m.a.JavaScript.valueToCode(e,"COLOUR",m.a.JavaScript.ORDER_COMMA)||'"#000000"',a=m.a.JavaScript.valueToCode(e,"FONT_SIZE",m.a.JavaScript.ORDER_COMMA)||"20",o=m.a.JavaScript.valueToCode(e,"STROKE_THICKNESS",m.a.JavaScript.ORDER_COMMA)||"0",l=m.a.JavaScript.valueToCode(e,"STROKE_COLOUR",m.a.JavaScript.ORDER_COMMA)||'"#ffffff"',i=m.a.JavaScript.valueToCode(e,"SCALE_X",m.a.JavaScript.ORDER_COMMA)||"1",r=m.a.JavaScript.valueToCode(e,"SCALE_Y",m.a.JavaScript.ORDER_COMMA)||"1";return _.b+".turtleEnvironment.drawText("+t+", "+n+", "+a+", "+o+", "+l+", "+i+", "+r+");\n"},m.a.JavaScript.custom_turtle_environment_draw_image=function(e){let t=m.a.JavaScript.quote_(e.getFieldValue("BLOB_URL")),n=m.a.JavaScript.valueToCode(e,"NEXT",m.a.JavaScript.ORDER_COMMA)||"0",a=m.a.JavaScript.valueToCode(e,"SCALE_X",m.a.JavaScript.ORDER_COMMA)||"1",o=m.a.JavaScript.valueToCode(e,"SCALE_Y",m.a.JavaScript.ORDER_COMMA)||"1",l=m.a.JavaScript.valueToCode(e,"OPACITY",m.a.JavaScript.ORDER_COMMA)||"1",i=m.a.JavaScript.valueToCode(e,"TINT",m.a.JavaScript.ORDER_COMMA)||"null";return _.b+".turtleEnvironment.drawImage("+t+", "+n+", "+a+", "+o+", "+l+", "+i+");\n"},m.a.JavaScript.custom_turtle_environment_get_mouse_coordinate=function(e){return[_.b+'.turtleEnvironment.getMouseCoordinate("'+e.getFieldValue("AXIS")+'", "'+e.getFieldValue("SITUATION")+'")',m.a.JavaScript.ORDER_MEMBER]},m.a.JavaScript.custom_turtle_environment_is_mouse_key_down=function(e){let t=m.a.JavaScript.valueToCode(e,"SECONDS",m.a.JavaScript.ORDER_COMMA)||"0";return[_.b+'.turtleEnvironment.isMouseKeyDown("'+e.getFieldValue("BUTTON")+'", '+t+")",m.a.JavaScript.ORDER_MEMBER]},m.a.JavaScript.custom_turtle_environment_clear_canvas=function(e){return _.b+".turtleEnvironment.clearCanvas();\n"},_.e("turtleEnvironment",(function(e,t){let n=e.createNativeFunction((function(e){if(x.draw){var t=new d.d;t.lineStyle(x.width,x.color).moveTo(V(x.x),P(x.y))}x.x+=Math.cos(K(x.angle))*e,x.y+=Math.sin(K(x.angle))*e,U.recordNewPosition(x.x,x.y),x.annimate(),x.draw&&(t.lineTo(V(x.x),P(x.y)),R.addChild(t),j())}));e.setProperty(t,"moveForward",n),n=e.createNativeFunction((function(e){if(x.draw){var t=new d.d;t.lineStyle(x.width,x.color).moveTo(V(x.x),P(x.y))}x.x-=Math.cos(K(x.angle))*e,x.y-=Math.sin(K(x.angle))*e,U.recordNewPosition(x.x,x.y),x.annimate(),x.draw&&(t.lineTo(V(x.x),P(x.y)),R.addChild(t),j())})),e.setProperty(t,"moveBackward",n),n=e.createNativeFunction((function(e,t){if(x.draw){var n=new d.d;n.lineStyle(x.width,x.color).moveTo(V(x.x),P(x.y))}x.x=e,x.y=t,U.recordNewPosition(x.x,x.y),x.annimate(),x.draw&&(n.lineTo(V(x.x),P(x.y)),R.addChild(n),j())})),e.setProperty(t,"moveToCoordinate",n),n=e.createNativeFunction((function(){return x.x})),e.setProperty(t,"getCoordinateX",n),n=e.createNativeFunction((function(){return x.y})),e.setProperty(t,"getCoordinateY",n),n=e.createNativeFunction((function(e){x.angle+=e,x.annimate()})),e.setProperty(t,"turnLeft",n),n=e.createNativeFunction((function(e){x.angle-=e,x.annimate()})),e.setProperty(t,"turnRight",n),n=e.createNativeFunction((function(e){x.angle=e,x.annimate()})),e.setProperty(t,"turnToAngle",n),n=e.createNativeFunction((function(){return v.b(x.angle)})),e.setProperty(t,"getAngle",n),n=e.createNativeFunction((function(){x.draw=!1})),e.setProperty(t,"penUp",n),n=e.createNativeFunction((function(){x.draw=!0})),e.setProperty(t,"penDown",n),n=e.createNativeFunction((function(){x.sprite.visible=!0})),e.setProperty(t,"show",n),n=e.createNativeFunction((function(){x.sprite.visible=!1})),e.setProperty(t,"hide",n),n=e.createNativeFunction((function(){L.children[0].style.cursor="inherit"})),e.setProperty(t,"showMouse",n),n=e.createNativeFunction((function(){L.children[0].style.cursor="none"})),e.setProperty(t,"hideMouse",n),n=e.createNativeFunction((function(e){v.d(e),x.color=v.a(e),x.annimate()})),e.setProperty(t,"setPenColor",n),n=e.createNativeFunction((function(e){x.width=e,x.annimate()})),e.setProperty(t,"setPenWidth",n),n=e.createNativeFunction((function(e){v.d(e),U.prepareFill(x.x,x.y,v.a(e))})),e.setProperty(t,"prepareFill",n),n=e.createNativeFunction((function(){U.finishFill(),j()})),e.setProperty(t,"finishFill",n),n=e.createNativeFunction((function(e,t,n){v.d(e);let a=new d.d;a.beginFill(v.a(e)),a.drawEllipse(0,0,.5*t,.5*n),a.endFill(),a.x=x.sprite.x,a.y=x.sprite.y,a.angle=x.sprite.angle,R.addChild(a),j()})),e.setProperty(t,"drawEllipse",n),n=e.createNativeFunction((function(e,t,n){v.d(e);let a=new d.d;a.beginFill(v.a(e)),a.drawRect(.5*-t,.5*-n,t,n),a.endFill(),a.x=x.sprite.x,a.y=x.sprite.y,a.angle=x.sprite.angle,R.addChild(a),j()})),e.setProperty(t,"drawRectangle",n),n=e.createNativeFunction((function(e,t,n,a,o,l,i){v.d(t),v.d(o);let r=new d.h(e,{fill:v.a(t),fontSize:n,lineJoin:"round",stroke:o,strokeThickness:a});r.x=x.sprite.x,r.y=x.sprite.y,r.angle=x.sprite.angle,r.anchor.set(.5),r.scale.x=l,r.scale.y=i,R.addChild(r),j()})),e.setProperty(t,"drawText",n),n=e.createNativeFunction((function(e,t,n,a,o,l){if(!(e=function(e,t){if(!e)return null;let n=T(),a=n.indexOf(e);return a<0?null:(a+=t,a<n.length?n[a]:void 0)}(e,t)))return;let i=function(e){return b.get(e)}(e);if(!i)return;let r=new d.g(i);r.x=x.sprite.x,r.y=x.sprite.y,r.angle=x.sprite.angle,r.anchor.set(.5),r.scale.x=n,r.scale.y=a,r.alpha=o,l&&(v.d(l),r.tint=v.a(l)),R.addChild(r),j()})),e.setProperty(t,"drawImage",n),n=e.createNativeFunction((function(e,t){if("CURRENT"==t||"LAST_LEFT_DOWN"==t&&z.leftButton.down||"LAST_RIGHT_DOWN"==t&&z.rightButton.down){if("X"==e)return z.x;if("Y"==e)return z.y}else if("LAST_LEFT_DOWN"==t){if("X"==e)return z.leftButton.lastDownX;if("Y"==e)return z.leftButton.lastDownY}else if("LAST_RIGHT_DOWN"==t){if("X"==e)return z.rightButton.lastDownX;if("Y"==e)return z.rightButton.lastDownY}throw"Invalid argument for getMouseCoordinate()"})),e.setProperty(t,"getMouseCoordinate",n),n=e.createNativeFunction((function(e,t){let n;if("LEFT"==e)n=z.leftButton;else{if(!(e="RIGHT"))throw"Invalid argument for isMouseKeyDown()";n=z.rightButton}return!!n.down||n.lastDownTime+1e3*t>(new Date).getTime()})),e.setProperty(t,"isMouseKeyDown",n),n=e.createNativeFunction((function(){R.removeChildren()})),e.setProperty(t,"clearCanvas",n)}));var S=document.getElementById("blocklyOutput");S.innerHTML=c.a;var O=new N.a(document.getElementById("contextMenu"));O.setFixedPosition(!0),O.listen("MDCMenu:selected",(async function(e){if(R)try{let t=0==e.detail.index?1:5,n=d.f.create({width:A*t,height:A*t});R.scale.x=t,R.scale.y=t,F.renderer.render(R,n),R.scale.x=1,R.scale.y=1;let a=F.renderer.plugins.extract.base64(n),o=await(await fetch(a)).blob();w.saveAs(o,r.d+"[截图].png")}catch(e){console.log(e),alert("截图失败！")}})),S.addEventListener("contextmenu",e=>{e.preventDefault(),r.c||(O.open&&(O.open=!1),O.setAbsolutePosition(e.clientX,e.clientY),O.open=!0)});var C,R,x,M,U,I=document.getElementById("pixiOutput"),L=document.getElementById("pixiContainer"),D=document.getElementById("pixiCanvas"),A=400;function B(){return Math.max(Math.min(I.offsetWidth-30,I.offsetHeight-10),3)}function J(){var e=B();C=(e-2)/A,D.width=e+30,D.height=e+10;const t=D.getContext("2d");t.clearRect(0,0,e+30,e+10);for(let n=1;n<10;++n)t.beginPath(),t.moveTo(.1*e*n,e),t.lineTo(.1*e*n,e+10),t.stroke(),t.fillText(Math.round((.1*n-.5)*A),.1*e*n+2,e+10),t.beginPath(),t.moveTo(e,.1*e*n),t.lineTo(e+10,.1*e*n),t.stroke(),t.fillText(Math.round((.5-.1*n)*A),e+2,.1*e*n+10);L.style.width=e+"px",L.style.height=e+"px",F&&(F.stage.scale.x=C,F.stage.scale.y=C),D.width>=S.offsetWidth?I.style.paddingLeft="0px":I.style.paddingLeft=.5*(S.offsetWidth-D.width)+"px"}J();var F=new d.a({width:B()-2,height:B()-2,transparent:!1,resizeTo:L,backgroundColor:16777215,resolution:1,antialias:!0});function V(e){return e+.5*A}function H(e){return e-.5*A}function P(e){return.5*A-e}function Y(e){return.5*A-e}function X(e){return e<-.5*A&&(e=-.5*A),e>.5*A&&(e=.5*A),e}function K(e){return e*(Math.PI/180)}L.appendChild(F.view),F.stage.interactive=!0,F.stage.hitArea=new d.e(0,0,A,A),F.stage.scale.x=C,F.stage.scale.y=C;class W{constructor(e,t){this.sprite=new d.g(e),this.originalScale=1e-4*A,this.sprite.scale.x=this.originalScale,this.sprite.scale.y=this.originalScale,this.color=0,this.draw=!0,this.width=1,this.sprite.anchor.set(.5),this.x=0,this.y=0,this.angle=90,this.annimate(),t.addChild(this.sprite)}annimate(){this.sprite.filters=[new p.a(0,this.color)],this.sprite.scale.x=this.originalScale*(2-Math.exp(-.2*this.width)),this.sprite.scale.y=this.originalScale*(2-Math.exp(-.2*this.width)),this.sprite.x=V(this.x),this.sprite.y=P(this.y),this.sprite.angle=90-this.angle}}class G{constructor(){}recordNewPosition(e,t){this.container&&this.coordinates.push({x:e,y:t})}prepareFill(e,t,n){if(this.container)throw"完成上一次填充后，才可进行新的填充！";this.container=new d.c,R.addChild(this.container),this.coordinates=[{x:e,y:t}],this.color=n}finishFill(){if(!this.container)throw"先准备填充！";let e=new d.d;e.beginFill(this.color),e.moveTo(V(this.coordinates[0].x),P(this.coordinates[0].y));for(let t=1;t<this.coordinates.length;++t)e.lineTo(V(this.coordinates[t].x),P(this.coordinates[t].y));e.endFill(),this.container.addChild(e),this.container=null}}var z={x:0,y:0,leftButton:{down:!1,lastDownTime:0,lastDownX:0,lastDownY:0},rightButton:{down:!1,lastDownTime:0,lastDownX:0,lastDownY:0}};function j(){if(R.children.length<2e3)return;console.log("Canvas contains too many children. Will try to compose.");let e=d.f.create({width:5*A,height:5*A});F.stage.removeChild(R),R.scale.x=5,R.scale.y=5,F.renderer.render(R,e);let t=new d.g(e);t.scale.x=.2,t.scale.y=.2,R.destroy(),M&&(M.destroy(),M=e),(R=new d.c).addChild(t),F.stage.addChildAt(R,0)}async function Z(e){let t=F.loader.add("turtle",k.a),n=await new Promise((e,n)=>t.load((t,n)=>e(n)));!function(e){i=e,a=document.getElementById("uploadImageFileInput"),(o=document.getElementById("imageCollections")).innerHTML=f.a,l=document.getElementById("uploadImageButton"),a.addEventListener("change",(function(){if(0==this.files.length)return;Object(h.a)(this.files[0],{maxSizeMB:.5,useWebWorker:!0}).then((function(e){E.createBlob(e,{})})).catch((function(e){console.log(e.message)}))}),!1),l.onclick=function(){a.click()}}({ignoreUnremovable:e.ignoreUnremovableAttributeForImages}),F.stage.interactive=!0,F.stage.hitArea=new d.e(0,0,A,A),F.stage.on("mousedown",(function(e){z.leftButton.down=!0;let t=e.currentTarget.toLocal(e.data.global);z.x=X(H(t.x)),z.y=X(Y(t.y))})),F.stage.on("rightdown",(function(e){z.rightButton.down=!0;let t=e.currentTarget.toLocal(e.data.global);z.x=X(H(t.x)),z.y=X(Y(t.y))})),F.stage.on("mousemove",(function(e){let t=e.currentTarget.toLocal(e.data.global);z.x=X(H(t.x)),z.y=X(Y(t.y))})),F.stage.on("mouseup",(function(e){let t=e.currentTarget.toLocal(e.data.global);z.x=X(H(t.x)),z.y=X(Y(t.y)),z.leftButton={down:!1,lastDownTime:(new Date).getTime(),lastDownX:z.x,lastDownY:z.y}})),F.stage.on("rightup",(function(e){let t=e.currentTarget.toLocal(e.data.global);z.x=X(H(t.x)),z.y=X(Y(t.y)),z.rightButton={down:!1,lastDownTime:(new Date).getTime(),lastDownX:z.x,lastDownY:z.y}})),F.stage.on("mouseupoutside",(function(e){z.leftButton={down:!1,lastDownTime:(new Date).getTime(),lastDownX:z.x,lastDownY:z.y}})),F.stage.on("rightupoutside",(function(e){z.rightButton={down:!1,lastDownTime:(new Date).getTime(),lastDownX:z.x,lastDownY:z.y}}));let u=n.turtle.texture;x=new W(u,F.stage),await r.b({toolbox:e.toolbox,fetchInitial:e.fetchInitial,fetchSolution:e.fetchSolution,codesPrefix:_.b+".turtleEnvironment.show();\n\n",stateUpdateListener:function(e){e==_.c.INITIAL&&(F.stage.removeChildren(),R=new d.c,F.stage.addChild(R),(x=new W(u,F.stage)).sprite.visible=!1,U=new G(R),M&&(M.destroy(),M=null))},runningSpeed:r.a.FAST,environmentVariables:[{name:"乌龟的横坐标",symbol:_.b+".turtleEnvironment.getCoordinateX()"},{name:"乌龟的纵坐标",symbol:_.b+".turtleEnvironment.getCoordinateY()"},{name:"乌龟的方向",symbol:_.b+".turtleEnvironment.getAngle()"}],layoutChangeListener:function(){J(),F.resize()}})}}}]);